#N canvas 259 92 1402 858 10;
#X obj 95 45 inlet notes;
#X text 200 53 Midi \, Velocity \, length (ticks);
#X obj 122 110 unpack 0 0 0, f 28;
#X obj 922 68 route ticks stop, f 66;
#X obj 922 43 inlet messages;
#X obj 98 608 list trim;
#X obj 355 772 outlet notes;
#X obj 1118 264 text define \$0-count;
#X obj 957 179 s \$0-ticks;
#X obj 922 120 t b;
#X obj 922 144 f;
#X obj 957 146 + 1;
#X obj 331 109 r \$0-ticks;
#X obj 286 158 +;
#X text 334 90 add current time to note length;
#X obj 122 227 pack 0 0 0;
#X text 189 221 pack all three together;
#X obj 221 356 text search \$0-count < 0;
#X obj 91 439 text insert \$0-count;
#X obj 221 377 + 1;
#X text 777 97 count ticks internally;
#X text 228 332 find place in test buffer so its in order lowest -
highest;
#X obj 331 130 t a a, f 12;
#X obj 64 339 t a a;
#X text 71 526 Note on;
#X text 1133 247 Here is the text bufffer;
#X msg 122 248 \$3 \$1 \$2;
#X obj 64 581 list split 1;
#X text 186 243 re-arrange so length is 1st;
#X text 145 582 remove the length (\$3) so just the note on message
;
#X text 792 609 the order of the text ffile is constatnly changing.
a note can come in with a lenght of 1000 ticks that gets put next in
the list but then a note can be played with 10 ticks which menas its
first but the counter has already moved on?;
#X obj 1118 132 t b b;
#X msg 1118 200 clear;
#N canvas 4 50 450 300 flush 0;
#X obj 65 22 inlet;
#X obj 65 56 text size \$0-count;
#X obj 65 106 t a b;
#X msg 117 128 0;
#X obj 65 161 f;
#X obj 103 161 + 1;
#X obj 65 127 until;
#X obj 65 182 text get \$0-count;
#X obj 65 210 list split 1;
#X obj 99 235 list split 1;
#X obj 99 256 pack 0 0;
#X obj 99 277 s \$0-notes-out;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 6 0;
#X connect 2 1 3 0;
#X connect 3 0 4 1;
#X connect 4 0 5 0;
#X connect 4 0 7 0;
#X connect 5 0 4 1;
#X connect 6 0 4 0;
#X connect 7 0 8 0;
#X connect 8 1 9 0;
#X connect 9 0 10 0;
#X connect 10 0 11 0;
#X restore 1145 168 pd flush;
#X obj 355 738 r \$0-notes-out;
#X obj 98 637 s \$0-notes-out;
#X obj 922 94 spigot 0;
#X obj 1001 99 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#N canvas 628 183 1141 769 read-the-text 0;
#X text 613 22 run the playback;
#X obj 342 219 text get \$0-count;
#X obj 342 290 list split 1, f 22;
#X obj 342 312 i;
#X obj 354 436 sel 1;
#X obj 342 333 t b f;
#X msg 342 84 0;
#X obj 100 10 inlet ticks;
#X obj 342 13 inlet new note;
#X text 377 74 each new note check the lowest entry which is at the
0 slot in the text buffer;
#X text 459 219 get it;
#X text 376 314 make sure it is an integer;
#X text 382 408 add to this object to compare to the tick count;
#X text 397 437 if a match do the following:;
#X obj 733 593 f;
#X obj 784 597 + 1;
#X obj 733 622 t f f;
#X obj 733 683 s \$0-local-count;
#X obj 382 137 r \$0-local-count;
#X obj 381 604 f;
#X text 483 290 extract just the length number;
#X obj 342 167 t f f;
#X obj 369 192 s \$0-store;
#X text 444 193 store current number;
#X obj 396 570 r \$0-store;
#X obj 314 372 i;
#X obj 514 642 pack 0 0;
#X obj 514 671 s \$0-notes-out;
#X obj 514 601 f;
#X obj 527 366 unpack;
#X text 519 625 send out the note off message;
#X obj 407 728 text delete \$0-count;
#X text 424 710 delete the note from the text buffer;
#X obj 381 513 t b b b b, f 48;
#X obj 342 105 t f f b, f 61;
#X obj 705 167 text size \$0-count;
#X obj 705 188 v \$0-v-sizr;
#X obj 354 457 v \$0-v-sizr;
#X obj 354 478 sel 0;
#X obj 381 625 t b f;
#X obj 263 689 text size \$0-count;
#X obj 263 710 v \$0-v-sizr;
#X obj 263 731 print;
#X obj 211 688 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 247 280 v \$0-v-sizr;
#X obj 170 150 t f b;
#X msg 291 256 0;
#X obj 215 177 v \$0-v-sizr;
#X obj 170 217 spigot 0;
#X obj 342 243 route bang;
#X obj 354 410 ==;
#X connect 1 0 49 0;
#X connect 2 0 3 0;
#X connect 2 1 29 0;
#X connect 3 0 5 0;
#X connect 4 0 37 0;
#X connect 5 0 25 0;
#X connect 5 1 50 1;
#X connect 6 0 34 0;
#X connect 7 0 45 0;
#X connect 8 0 6 0;
#X connect 14 0 16 0;
#X connect 15 0 14 1;
#X connect 16 0 17 0;
#X connect 16 1 15 0;
#X connect 18 0 21 0;
#X connect 19 0 39 0;
#X connect 21 0 1 0;
#X connect 21 1 22 0;
#X connect 24 0 19 1;
#X connect 25 0 50 0;
#X connect 26 0 27 0;
#X connect 28 0 26 0;
#X connect 29 0 28 1;
#X connect 33 0 19 0;
#X connect 33 1 28 0;
#X connect 33 2 14 0;
#X connect 34 0 21 0;
#X connect 34 1 14 1;
#X connect 34 2 35 0;
#X connect 35 0 36 0;
#X connect 37 0 38 0;
#X connect 38 1 33 0;
#X connect 39 0 40 0;
#X connect 39 1 31 0;
#X connect 40 0 41 0;
#X connect 41 0 42 0;
#X connect 43 0 41 0;
#X connect 45 0 48 0;
#X connect 45 1 47 0;
#X connect 46 0 44 0;
#X connect 47 0 48 1;
#X connect 48 0 25 0;
#X connect 49 0 46 0;
#X connect 49 1 2 0;
#X connect 50 0 4 0;
#X restore 622 316 pd read-the-text;
#X text 626 334 line number that matched and needs to be turned off
and deleted;
#X obj 26 176 s \$0-new-note!;
#X obj 715 258 r \$0-new-note!;
#X obj 1195 96 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 997 127 sel 1;
#X msg 997 148 0;
#X obj 286 179 t a a;
#X obj 95 78 t b a;
#X floatatom 140 317 5 0 0 0 - - -;
#X obj 140 337 t f f;
#X obj 140 358 pack 0 0;
#X connect 0 0 46 0;
#X connect 2 0 15 0;
#X connect 2 1 15 1;
#X connect 2 2 13 0;
#X connect 3 0 36 0;
#X connect 3 1 31 0;
#X connect 4 0 3 0;
#X connect 5 0 35 0;
#X connect 9 0 10 0;
#X connect 10 0 11 0;
#X connect 11 0 10 1;
#X connect 11 0 8 0;
#X connect 12 0 22 0;
#X connect 13 0 45 0;
#X connect 15 0 26 0;
#X connect 17 0 19 0;
#X connect 19 0 18 1;
#X connect 22 0 38 0;
#X connect 22 1 13 1;
#X connect 23 0 27 0;
#X connect 23 1 18 0;
#X connect 26 0 23 0;
#X connect 27 1 5 0;
#X connect 31 0 32 0;
#X connect 31 1 33 0;
#X connect 32 0 7 0;
#X connect 34 0 6 0;
#X connect 36 0 9 0;
#X connect 37 0 36 1;
#X connect 37 0 43 0;
#X connect 41 0 38 1;
#X connect 42 0 31 0;
#X connect 43 0 44 0;
#X connect 44 0 10 1;
#X connect 45 0 15 2;
#X connect 45 1 17 0;
#X connect 46 0 40 0;
#X connect 46 1 2 0;
#X connect 47 0 48 0;
#X connect 48 0 49 0;
#X connect 48 1 17 0;
#X connect 49 0 18 0;
