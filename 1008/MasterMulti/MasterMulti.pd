#N canvas 279 170 1141 674 10;
#X obj 48 107 loadbang;
#X msg 48 139 1;
#X obj 220 200 + 10;
#X obj 220 174 * 300;
#X obj 48 321 f;
#X obj 220 321 f;
#X msg 48 367 Tempo \$1 BPM MIDI \;;
#X msg 220 366 Tempo \$1 BPM \;;
#X text 6 13 always running. mute incoming BPM to turn off in other
Modules;
#X obj 220 122 r mm-bpmDial;
#X obj 48 469 s mm-bpmDial-label;
#N canvas 994 50 922 809 metro 0;
#X obj 276 200 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#N canvas 288 627 292 294 mstobpm 0;
#X obj 45 13 inlet;
#X obj 46 145 timer;
#X obj 47 238 outlet;
#X obj 46 108 t b b;
#X obj 45 78 sel 0;
#X obj 48 206 / 1;
#X obj 46 172 expr 30000 / $f1;
#X obj 43 45 % 12;
#X text 97 55 time 32 notes;
#X connect 0 0 7 0;
#X connect 1 0 6 0;
#X connect 3 0 1 0;
#X connect 3 1 1 1;
#X connect 4 0 3 0;
#X connect 5 0 2 0;
#X connect 6 0 5 0;
#X connect 7 0 4 0;
#X restore 276 588 pd mstobpm;
#X floatatom 276 627 5 0 0 0 - - -, f 5;
#N canvas 1146 357 174 209 dialinbpm 0;
#X obj 29 41 inlet;
#X obj 29 72 expr 1000/($f1/60);
#X obj 29 96 / 24;
#X obj 30 150 outlet;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X restore 357 239 pd dialinbpm;
#N canvas 843 96 902 691 mainmetro 0;
#X obj 268 49 inlet;
#X obj 443 49 inlet;
#X obj 268 146 metro 50;
#X obj 310 453 + 1, f 5;
#X obj 268 452 f;
#X obj 268 597 outlet;
#X msg 492 399 0;
#X obj 416 525 sel 1;
#X obj 396 135 midirealtimein;
#X obj 268 377 spigot 1;
#X obj 396 378 spigot 0;
#X obj 411 290 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 321 313 ==;
#X obj 321 339 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X obj 449 340 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 396 157 sel 248 250 251;
#X obj 568 233 delay 1000;
#X msg 411 231 1;
#X obj 396 180 t b b b b, f 25;
#X msg 568 208 stop;
#X msg 568 257 0;
#X text 67 12 autoswitch between internal and MIDI clock;
#X text 513 134 MIDI 248 = clock \; 250 = start \; 251 = continue.
;
#X obj 313 197 loadbang;
#X msg 313 219 0;
#X obj 268 80 t f b;
#X text 28 87 reset back to 0 when it starts;
#X text 246 619 24 pulses per quarter note output;
#X text 503 50 metro speed in ms;
#X text 312 48 start stop;
#X obj 416 493 >= 23;
#X obj 551 360 s midi-clock-present;
#X connect 0 0 25 0;
#X connect 1 0 2 1;
#X connect 2 0 9 0;
#X connect 3 0 4 1;
#X connect 4 0 3 0;
#X connect 4 0 5 0;
#X connect 4 0 30 0;
#X connect 6 0 4 1;
#X connect 7 0 6 0;
#X connect 8 0 15 0;
#X connect 9 0 4 0;
#X connect 10 0 4 0;
#X connect 11 0 12 0;
#X connect 11 0 14 0;
#X connect 11 0 31 0;
#X connect 12 0 13 0;
#X connect 13 0 9 1;
#X connect 14 0 10 1;
#X connect 15 0 18 0;
#X connect 15 1 6 0;
#X connect 15 2 6 0;
#X connect 16 0 20 0;
#X connect 17 0 11 0;
#X connect 18 0 10 0;
#X connect 18 1 16 0;
#X connect 18 2 17 0;
#X connect 18 3 19 0;
#X connect 19 0 16 0;
#X connect 20 0 11 0;
#X connect 23 0 24 0;
#X connect 24 0 11 0;
#X connect 25 0 2 0;
#X connect 25 1 6 0;
#X connect 30 0 7 0;
#X restore 276 283 pd mainmetro;
#X obj 276 164 inlet;
#X obj 357 165 inlet;
#X obj 440 663 spigot 1;
#X obj 276 659 spigot 0;
#X obj 493 598 r midi-clock-present;
#X obj 493 622 ==;
#X obj 357 196 i;
#X obj 276 743 outlet;
#X obj 440 743 outlet;
#X text 252 544 if getting clock from MIDI \, measure the BPM;
#X msg 581 437 248;
#X obj 581 459 midiout;
#X text 403 47 a MIDI enabled master metronome;
#X text 243 766 separate BPM midi and internal for display purposes
;
#X text 547 374 send ticks out as midiclock;
#X text 412 165 bpm input;
#X msg 619 436 250;
#X obj 327 387 s master-ticks;
#X text 404 67 start stop in left \, BPM in right. The BPM input is
ignored in presence of MIDI clock. The mainmetro sub patch switches
automatically between MIDI clock and 24 pulses per quarter note internal
clock. The resultant pulses are sent out as MIDI clock (master-ticks)
to sync your Modules \, and a global BPM number is sent out as master-bpm.
;
#X obj 581 409 r master-ticks, f 25;
#X connect 0 0 4 0;
#X connect 1 0 2 0;
#X connect 2 0 8 0;
#X connect 3 0 4 1;
#X connect 4 0 1 0;
#X connect 4 0 22 0;
#X connect 5 0 0 0;
#X connect 6 0 11 0;
#X connect 7 0 13 0;
#X connect 8 0 12 0;
#X connect 9 0 8 1;
#X connect 9 0 10 0;
#X connect 10 0 7 1;
#X connect 11 0 3 0;
#X connect 11 0 7 0;
#X connect 15 0 16 0;
#X connect 21 0 16 0;
#X connect 24 0 15 0;
#X restore 48 242 pd metro;
#X text 425 8 Master Metro Module. Only use one for each Modular Patch.
Sends 24 ticks per Beat (master-ticks). Sends a Beat count relative
to set time signature (master-beats). master-timeSig sends how many
beats in a measure to use in other modules;
#X obj 101 289 s master-bpm;
#X obj 523 133 * 6;
#X obj 523 155 i;
#X obj 523 177 - 3;
#X obj 523 242 * 12;
#X obj 429 315 s as-\$1-trans;
#X obj 523 111 r mm-transpose;
#X obj 450 339 s bp-\$1-trans;
#X obj 459 364 s czz-\$1-trans;
#X obj 480 388 s rampsyn-\$1-trans;
#X obj 499 415 s rhodey-\$1-trans;
#X obj 520 439 s tunedel-\$1-trans;
#X obj 529 464 s wavs-\$1-trans;
#X obj 550 488 s bsamp-\$1-trans;
#X obj 563 510 s s24-\$1-trans;
#X obj 580 245 s mm-transpose-label;
#X msg 580 216 Transpose: \$1 Oct.;
#X obj 835 335 r mm-x1;
#X msg 835 357 x;
#X obj 835 379 s mm-x1-label;
#X msg 823 517 x;
#X obj 823 495 r mm-x2;
#X obj 823 539 s mm-x2-label;
#X connect 0 0 1 0;
#X connect 1 0 11 0;
#X connect 2 0 11 1;
#X connect 3 0 2 0;
#X connect 4 0 6 0;
#X connect 5 0 7 0;
#X connect 6 0 10 0;
#X connect 7 0 10 0;
#X connect 9 0 3 0;
#X connect 11 0 4 0;
#X connect 11 0 13 0;
#X connect 11 1 5 0;
#X connect 11 1 13 0;
#X connect 14 0 15 0;
#X connect 15 0 16 0;
#X connect 16 0 17 0;
#X connect 16 0 29 0;
#X connect 17 0 18 0;
#X connect 17 0 20 0;
#X connect 17 0 21 0;
#X connect 17 0 22 0;
#X connect 17 0 23 0;
#X connect 17 0 24 0;
#X connect 17 0 25 0;
#X connect 17 0 26 0;
#X connect 17 0 27 0;
#X connect 19 0 14 0;
#X connect 29 0 28 0;
#X connect 30 0 31 0;
#X connect 31 0 32 0;
#X connect 33 0 35 0;
#X connect 34 0 33 0;
