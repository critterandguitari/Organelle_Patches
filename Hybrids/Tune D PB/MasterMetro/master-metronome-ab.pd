#N canvas 661 50 1119 822 10;
#X obj 56 160 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#N canvas 287 603 292 294 mstobpm 0;
#X obj 45 13 inlet;
#X obj 46 145 timer;
#X obj 47 238 outlet;
#X obj 46 108 t b b;
#X obj 45 78 sel 0;
#X obj 48 206 / 1;
#X obj 46 172 expr 30000 / $f1;
#X obj 43 45 % 12;
#X text 97 55 time 32 notes;
#X connect 0 0 7 0;
#X connect 1 0 6 0;
#X connect 3 0 1 0;
#X connect 3 1 1 1;
#X connect 4 0 3 0;
#X connect 5 0 2 0;
#X connect 6 0 5 0;
#X connect 7 0 4 0;
#X restore 122 548 pd mstobpm;
#X floatatom 122 587 5 0 0 0 - - -, f 5;
#N canvas 949 322 174 209 dialinbpm 0;
#X obj 29 41 inlet;
#X obj 29 72 expr 1000/($f1/60);
#X obj 29 96 / 24;
#X obj 30 150 outlet;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X restore 137 199 pd dialinbpm;
#N canvas 169 50 902 691 mainmetro 0;
#X obj 268 49 inlet;
#X obj 443 49 inlet;
#X obj 268 146 metro 50;
#X obj 377 428 + 1, f 5;
#X obj 268 452 f;
#X obj 268 597 outlet;
#X msg 553 486 0;
#X obj 338 506 sel 1;
#X obj 396 135 midirealtimein;
#X obj 268 377 spigot 1;
#X obj 396 378 spigot 0;
#X obj 411 290 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 321 313 ==;
#X obj 321 339 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X obj 449 340 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 396 157 sel 248 250 251;
#X obj 568 233 delay 1000;
#X msg 411 231 1;
#X obj 396 180 t b b b b, f 25;
#X msg 568 208 stop;
#X msg 568 257 0;
#X text 67 12 autoswitch between internal and MIDI clock;
#X text 513 134 MIDI 248 = clock \; 250 = start \; 251 = continue.
;
#X obj 313 197 loadbang;
#X msg 313 219 0;
#X obj 268 80 t f b;
#X text 28 87 reset back to 0 when it starts;
#X text 246 619 24 pulses per quarter note output;
#X text 503 50 metro speed in ms;
#X text 312 48 start stop;
#X obj 338 474 >= 95;
#X obj 550 352 s jr-\$1-midi-clock-present;
#X connect 0 0 25 0;
#X connect 1 0 2 1;
#X connect 2 0 9 0;
#X connect 3 0 4 1;
#X connect 4 0 3 0;
#X connect 4 0 30 0;
#X connect 4 0 5 0;
#X connect 6 0 4 1;
#X connect 7 0 6 0;
#X connect 8 0 15 0;
#X connect 9 0 4 0;
#X connect 10 0 4 0;
#X connect 11 0 12 0;
#X connect 11 0 14 0;
#X connect 11 0 31 0;
#X connect 12 0 13 0;
#X connect 13 0 9 1;
#X connect 14 0 10 1;
#X connect 15 0 18 0;
#X connect 15 1 6 0;
#X connect 15 2 6 0;
#X connect 16 0 20 0;
#X connect 17 0 11 0;
#X connect 18 0 10 0;
#X connect 18 1 16 0;
#X connect 18 2 17 0;
#X connect 18 3 19 0;
#X connect 19 0 16 0;
#X connect 20 0 11 0;
#X connect 23 0 24 0;
#X connect 24 0 11 0;
#X connect 25 0 2 0;
#X connect 25 1 6 0;
#X connect 30 0 7 0;
#X restore 56 243 pd mainmetro;
#X obj 56 124 inlet;
#X obj 137 125 inlet;
#X obj 286 623 spigot 1;
#X obj 122 619 spigot 0;
#X obj 339 558 r midi-clock-present;
#X obj 339 582 ==;
#X obj 137 156 i;
#X obj 122 703 outlet;
#X obj 286 703 outlet;
#N canvas 243 330 450 300 triplets 0;
#X obj 73 41 inlet;
#X obj 73 128 outlet;
#X obj 73 86 sel 0 8 16;
#X obj 73 63 % 24;
#X connect 0 0 3 0;
#X connect 2 0 1 0;
#X connect 2 1 1 0;
#X connect 2 2 1 0;
#X connect 3 0 2 0;
#X restore 639 386 pd triplets;
#N canvas 602 161 450 300 sixteenths 0;
#X obj 73 41 inlet;
#X obj 73 128 outlet;
#X obj 73 86 sel 0 6 12 18;
#X obj 73 63 % 24;
#X connect 0 0 3 0;
#X connect 2 0 1 0;
#X connect 2 1 1 0;
#X connect 2 2 1 0;
#X connect 2 3 1 0;
#X connect 3 0 2 0;
#X restore 773 387 pd sixteenths;
#X text 32 504 if getting clock from MIDI \, measure the BPM;
#N canvas 242 376 450 300 quarters 0;
#X obj 73 41 inlet;
#X obj 73 111 outlet;
#X obj 73 75 sel 0 24 48 72;
#X connect 0 0 2 0;
#X connect 2 0 1 0;
#X connect 2 1 1 0;
#X connect 2 2 1 0;
#X connect 2 3 1 0;
#X restore 396 384 pd quarters;
#N canvas 672 196 450 300 eighths 0;
#X obj 73 41 inlet;
#X obj 72 124 outlet;
#X obj 73 90 sel 0 12;
#X obj 73 63 % 24;
#X connect 0 0 3 0;
#X connect 2 0 1 0;
#X connect 2 1 1 0;
#X connect 3 0 2 0;
#X restore 526 384 pd eighths;
#X obj 319 288 s 24ppq;
#X obj 562 631 r 24ppq;
#X msg 562 659 248;
#X obj 562 681 midiout;
#X text 183 7 a MIDI enabled master metronome;
#X text 411 761 separate BPM midi and internal for display purposes
;
#X text 528 596 send ticks out as midiclock;
#X text 192 125 bpm input;
#X msg 600 658 250;
#X text 184 27 start stop in left \, BPM in right. The BPM input is
ignored in presence of MIDI clock. The mainmetro sub patch switches
automatically between MIDI clock and 24 pulses per quarter note internal
clock. The resultant pulses are sent out as MIDI clock to sync downstream
gear.;
#N canvas 766 548 450 300 wholes 0;
#X obj 73 41 inlet;
#X obj 73 96 outlet;
#X obj 73 63 sel 0;
#X connect 0 0 2 0;
#X connect 2 0 1 0;
#X restore 56 383 pd wholes;
#N canvas 767 545 450 300 halves 0;
#X obj 73 41 inlet;
#X obj 73 156 outlet;
#X obj 73 63 sel 0 47;
#X connect 0 0 2 0;
#X connect 2 0 1 0;
#X connect 2 1 1 0;
#X restore 170 384 pd halves;
#N canvas 768 542 646 474 thirds 0;
#X obj 118 13 inlet;
#X obj 118 151 outlet;
#X obj 118 121 sel 0 32 64;
#X connect 0 0 2 0;
#X connect 2 0 1 0;
#X connect 2 1 1 0;
#X connect 2 2 1 0;
#X restore 276 384 pd thirds;
#X obj 276 413 s thirds;
#X obj 170 413 s halves;
#X obj 56 413 s wholes;
#X obj 396 414 s quarters;
#X obj 526 413 s eighths;
#X obj 639 414 s triplets;
#X obj 773 412 s sixteenths;
#X obj 186 670 s master-bpm;
#X connect 0 0 4 0;
#X connect 1 0 2 0;
#X connect 2 0 8 0;
#X connect 3 0 4 1;
#X connect 4 0 1 0;
#X connect 4 0 17 0;
#X connect 4 0 14 0;
#X connect 4 0 15 0;
#X connect 4 0 18 0;
#X connect 4 0 19 0;
#X connect 4 0 30 0;
#X connect 4 0 29 0;
#X connect 4 0 31 0;
#X connect 5 0 0 0;
#X connect 6 0 11 0;
#X connect 7 0 13 0;
#X connect 7 0 39 0;
#X connect 8 0 12 0;
#X connect 8 0 39 0;
#X connect 9 0 8 1;
#X connect 9 0 10 0;
#X connect 10 0 7 1;
#X connect 11 0 3 0;
#X connect 11 0 7 0;
#X connect 14 0 37 0;
#X connect 15 0 38 0;
#X connect 17 0 35 0;
#X connect 18 0 36 0;
#X connect 20 0 21 0;
#X connect 21 0 22 0;
#X connect 27 0 22 0;
#X connect 29 0 34 0;
#X connect 30 0 33 0;
#X connect 31 0 32 0;
