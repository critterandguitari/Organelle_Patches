#N canvas 99 148 1594 663 10;
#X obj 599 458 loadbang;
#X obj 599 534 soundfiler;
#N canvas 0 50 450 300 (subpatch) 0;
#X array bs-\$1-sample 882004 float 0;
#X coords 0 1.02 882003 -1.02 200 130 1 0 0;
#X restore 818 442 graph;
#X text 583 417 load .wav into the table below;
#X obj 28 263 pack 0 0 0;
#X text 267 500 final gain adjustment;
#X obj 229 499 *~ 1;
#X obj 28 304 route 1 2 3 4 5 6, f 34;
#X obj 28 225 poly 6 1, f 11;
#X obj 28 183 spigot 1;
#X obj 101 184 spigot 0;
#X obj 136 262 pack 0 0 0;
#X obj 136 224 poly 1 1, f 11;
#X obj 229 34 > 0.5;
#X obj 229 56 i;
#X floatatom 229 100 5 0 0 0 - - -, f 5;
#X obj 230 123 ==;
#X obj 330 186 sel 1 0;
#X text 30 51 basic sampler with recording;
#X text 28 74 sample is transposed by keys;
#X obj 1000 51 * 100;
#X obj 1000 78 i;
#X obj 1146 54 * 100;
#X obj 1146 79 i;
#X obj 792 99 bang;
#X obj 785 176 - 0.5;
#X obj 785 198 * 200;
#X obj 785 226 i;
#X obj 638 120 - 0.5;
#X obj 638 144 * 200;
#X obj 638 172 i;
#X obj 638 200 abs;
#X obj 683 58 detent 0.075;
#X text 274 34 knob selects mono vs poly;
#X obj 229 12 r bs-\$1-monopoly;
#X obj 683 24 r bs-\$1-pitch;
#X obj 1000 22 r bs-\$1-dur;
#X obj 1146 25 r bs-\$1-env;
#X obj 329 271 s bs-\$1-monopoly-label;
#X obj 28 113 r bs-\$1-notes-in;
#X obj 660 316 s bs-\$1-pitch-label;
#X obj 1000 142 s bs-\$1-dur-label;
#X obj 1146 137 s bs-\$1-env-label;
#X msg 307 223 Mono \;;
#X msg 388 222 Poly \;;
#X msg 790 124 Samp Speed ORIG \;;
#X msg 785 256 Samp Speed +\$1 % \;;
#X msg 1000 111 Envelope \$1 %;
#X msg 1146 108 Duration \$1 %;
#X msg 638 225 Samp Speed -\$1 % \;;
#X obj 230 561 s~ bs-\$1-out;
#X obj 599 559 s bs-\$1-slen;
#X obj 688 150 s bs-\$1-detent-speed;
#N canvas 786 237 1009 589 record-sample 1;
#X msg 201 290 bang;
#X obj 263 232 r~ inL;
#X obj 322 231 r~ inR;
#X msg 46 328 \; newsample normalize 1;
#X msg 524 231 0;
#X obj 471 90 sel 1 0;
#X obj 634 261 timer;
#X obj 634 291 * 44.1;
#X obj 306 170 t b b;
#X obj 306 359 *~;
#X obj 362 319 line~;
#X msg 437 235 0 2;
#X obj 46 296 delay 2100;
#X msg 487 230 1;
#X text 601 383 time length of recording in samples;
#X text 16 25 records as long as aux button or foot switch are held
down;
#X text 82 46 max 2 seconds;
#X text 43 387 normalize when done;
#X obj 634 319 expr if($f1 > 882000 \, 882000 \, $f1);
#X obj 578 412 r saveState;
#X obj 578 434 bang;
#X obj 578 478 soundfiler;
#X msg 578 456 write /tmp/state/sound.wav newsample;
#X obj 472 25 r bs-\$1-record-button;
#X obj 445 320 s bs-\$1-record-button-led;
#X msg 383 235 1 2;
#X obj 201 255 delay 2;
#X obj 307 413 tabwrite~ bs-\$1-sample;
#X obj 634 344 s bs-\$1-slen;
#X connect 0 0 27 0;
#X connect 1 0 9 0;
#X connect 2 0 9 0;
#X connect 4 0 24 0;
#X connect 5 0 6 0;
#X connect 5 0 13 0;
#X connect 5 0 8 0;
#X connect 5 1 6 1;
#X connect 5 1 4 0;
#X connect 5 1 11 0;
#X connect 6 0 7 0;
#X connect 7 0 18 0;
#X connect 8 0 26 0;
#X connect 8 1 25 0;
#X connect 9 0 27 0;
#X connect 10 0 9 1;
#X connect 11 0 10 0;
#X connect 12 0 3 0;
#X connect 13 0 24 0;
#X connect 18 0 28 0;
#X connect 19 0 20 0;
#X connect 20 0 22 0;
#X connect 22 0 21 0;
#X connect 23 0 5 0;
#X connect 25 0 10 0;
#X connect 26 0 0 0;
#X restore 990 306 pd record-sample;
#X obj 28 391 samplervoice \$1;
#X obj 599 483 i \$1;
#X msg 599 509 read ./sound.wav bs-\$1-sample;
#X obj 1162 415 r bs-\$1-dur;
#X obj 1162 437 print;
#X obj 281 394 samplervoice \$1;
#X obj 351 417 samplervoice \$1;
#X obj 86 416 samplervoice \$1;
#X obj 160 390 samplervoice \$1;
#X obj 224 419 samplervoice \$1;
#X connect 0 0 55 0;
#X connect 1 0 51 0;
#X connect 4 0 7 0;
#X connect 6 0 50 0;
#X connect 7 0 54 0;
#X connect 7 1 61 0;
#X connect 7 2 62 0;
#X connect 7 3 63 0;
#X connect 7 4 59 0;
#X connect 7 5 60 0;
#X connect 8 0 4 0;
#X connect 8 1 4 1;
#X connect 8 2 4 2;
#X connect 9 0 8 0;
#X connect 10 0 12 0;
#X connect 11 0 7 0;
#X connect 12 0 11 0;
#X connect 12 1 11 1;
#X connect 12 2 11 2;
#X connect 13 0 14 0;
#X connect 14 0 15 0;
#X connect 15 0 16 0;
#X connect 15 0 9 1;
#X connect 16 0 17 0;
#X connect 16 0 10 1;
#X connect 17 0 43 0;
#X connect 17 1 44 0;
#X connect 20 0 21 0;
#X connect 21 0 47 0;
#X connect 22 0 23 0;
#X connect 23 0 48 0;
#X connect 24 0 45 0;
#X connect 25 0 26 0;
#X connect 26 0 27 0;
#X connect 27 0 46 0;
#X connect 28 0 29 0;
#X connect 29 0 30 0;
#X connect 30 0 31 0;
#X connect 31 0 49 0;
#X connect 32 0 28 0;
#X connect 32 0 52 0;
#X connect 32 1 24 0;
#X connect 32 1 52 0;
#X connect 32 2 25 0;
#X connect 32 2 52 0;
#X connect 34 0 13 0;
#X connect 35 0 32 0;
#X connect 36 0 20 0;
#X connect 37 0 22 0;
#X connect 39 0 9 0;
#X connect 39 0 10 0;
#X connect 43 0 38 0;
#X connect 44 0 38 0;
#X connect 45 0 40 0;
#X connect 46 0 40 0;
#X connect 47 0 41 0;
#X connect 48 0 42 0;
#X connect 49 0 40 0;
#X connect 54 0 6 0;
#X connect 55 0 56 0;
#X connect 56 0 1 0;
#X connect 57 0 58 0;
#X connect 59 0 6 0;
#X connect 60 0 6 0;
#X connect 61 0 6 0;
#X connect 62 0 6 0;
#X connect 63 0 6 0;
