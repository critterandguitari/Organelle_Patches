#N canvas 379 87 1249 877 12;
#X text 62 12 signal;
#X obj 801 11 inlet~;
#X text 852 11 control signal;
#N canvas 92 117 450 300 messages 0;
#X obj 36 22 inlet;
#X obj 36 210 s \$0-att;
#X obj 83 235 s \$0-rel;
#X obj 121 197 s \$0-thresh;
#X obj 168 247 s \$0-gain;
#X obj 36 46 route att rel thresh gain ratio;
#X obj 219 219 s \$0-ratio;
#X obj 121 163 dbtorms;
#X obj 185 100 rmstodb;
#X obj 185 124 / 100;
#X connect 0 0 5 0;
#X connect 5 0 1 0;
#X connect 5 1 2 0;
#X connect 5 2 7 0;
#X connect 5 3 8 0;
#X connect 5 4 6 0;
#X connect 7 0 3 0;
#X connect 8 0 9 0;
#X connect 9 0 4 0;
#X restore 154 43 pd messages;
#X text 344 124 normalize rms to 0-1 float;
#X obj 461 365 vline~;
#X obj 12 665 *~;
#X obj 12 719 outlet~;
#X obj 154 12 inlet;
#X obj 172 584 -~;
#X obj 460 711 *~, f 49;
#X obj 460 765 outlet~;
#X obj 12 689 hip~ 4;
#X obj 460 735 hip~ 4;
#X obj 171 548 sig~ 1;
#X text 221 545 invert;
#X obj 460 508 *~ 1;
#N canvas 4 50 748 608 threshold 0;
#X obj 25 16 inlet;
#X obj 52 236 threshold~ 0.5 10 0.5 10;
#X text 235 243 release;
#X obj 51 196 sig~;
#X obj 121 150 pack 0 10 0 10;
#X obj 121 174 list prepend set;
#X obj 121 198 list trim;
#X obj 121 113 t a a;
#X obj 121 83 r \$0-thresh;
#X obj 217 403 s \$0-release;
#X obj 284 317 r \$0-rel;
#X obj 217 363 pack 0 100;
#X connect 0 0 3 0;
#X connect 1 1 11 0;
#X connect 3 0 1 0;
#X connect 4 0 5 0;
#X connect 5 0 6 0;
#X connect 6 0 1 0;
#X connect 7 0 4 0;
#X connect 7 1 4 2;
#X connect 8 0 7 0;
#X connect 10 0 11 1;
#X connect 11 0 9 0;
#X restore 275 272 pd threshold;
#X obj 275 179 t a a, f 27;
#X text 298 252 detect threshold for attack and release;
#N canvas 428 93 647 582 rms-gain 0;
#X obj 37 17 inlet;
#X obj 97 511 outlet;
#X obj 37 61 moses, f 9;
#X obj 97 29 r \$0-thresh;
#X obj 97 192 -;
#X obj 115 162 r \$0-thresh;
#X obj 97 472 clip 0 1;
#X obj 97 378 +;
#X obj 115 352 r \$0-thresh;
#X obj 97 299 *;
#X obj 115 245 swap 1;
#X obj 97 97 t a a, f 24;
#X obj 97 402 /, f 24;
#X obj 115 269 -;
#X obj 115 220 r \$0-thresh;
#X connect 0 0 2 0;
#X connect 2 1 11 0;
#X connect 3 0 2 1;
#X connect 4 0 9 0;
#X connect 5 0 4 1;
#X connect 6 0 1 0;
#X connect 7 0 12 0;
#X connect 8 0 7 1;
#X connect 9 0 7 0;
#X connect 10 0 13 0;
#X connect 10 1 13 1;
#X connect 11 0 4 0;
#X connect 11 1 12 1;
#X connect 12 0 6 0;
#X connect 13 0 9 1;
#X connect 14 0 10 0;
#X restore 461 218 pd rms-gain;
#X obj 461 483 clip~ 0 1;
#X obj 348 311 r \$0-release;
#X obj 461 333 pack 0 1;
#X obj 514 295 r \$0-att;
#X obj 461 443 *~;
#X obj 479 416 r \$0-gain;
#X text 374 96 window is 512 samples;
#X obj 275 131 dbtorms;
#X obj 626 837 outlet~;
#X obj 741 835 outlet~;
#X text 809 830 gain adjustment out for visual monitoring;
#X obj 173 660 *~ 1;
#X obj 460 648 *~ 1;
#X obj 173 609 sqrt~;
#X obj 461 615 sqrt~;
#X obj 275 94 env~ 512;
#X obj 12 11 inlet~;
#X connect 1 0 10 1;
#X connect 1 0 36 0;
#X connect 5 0 25 0;
#X connect 6 0 12 0;
#X connect 8 0 3 0;
#X connect 9 0 34 0;
#X connect 10 0 13 0;
#X connect 12 0 7 0;
#X connect 13 0 11 0;
#X connect 14 0 9 0;
#X connect 16 0 9 1;
#X connect 16 0 35 0;
#X connect 18 0 17 0;
#X connect 18 1 20 0;
#X connect 20 0 23 0;
#X connect 21 0 16 0;
#X connect 22 0 5 0;
#X connect 23 0 5 0;
#X connect 24 0 23 1;
#X connect 25 0 21 0;
#X connect 26 0 25 1;
#X connect 28 0 18 0;
#X connect 32 0 6 1;
#X connect 32 0 29 0;
#X connect 33 0 10 0;
#X connect 33 0 30 0;
#X connect 34 0 32 0;
#X connect 35 0 33 0;
#X connect 36 0 28 0;
#X connect 37 0 6 0;
