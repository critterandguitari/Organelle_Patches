#N canvas 394 176 1130 571 10;
#X obj 6 5 inlet;
#N canvas 1046 162 722 845 messages 0;
#X obj 23 18 inlet;
#X obj 540 112 s \$0-ticks;
#X obj 23 148 s \$0-length;
#N canvas 4 50 450 300 start-sync-commands 0;
#X text 107 83 start sync;
#X obj 230 156 s \$0-count-ticks-spigot;
#X obj 41 273 s \$0-start-sync-spigot;
#X obj 230 129 0;
#X obj 41 248 1;
#X text 253 131 turn off;
#X text 67 250 wait for top of beat from ticks in;
#X obj 41 106 t b b b b, f 32;
#X obj 167 165 0;
#X obj 167 190 s \$0-erase;
#X obj 31 10 inlet;
#X text 82 17 bang;
#X obj 104 223 s \$0-update-length;
#X connect 3 0 1 0;
#X connect 4 0 2 0;
#X connect 7 0 4 0;
#X connect 7 1 12 0;
#X connect 7 2 8 0;
#X connect 7 3 3 0;
#X connect 8 0 9 0;
#X connect 10 0 7 0;
#X restore 126 252 pd start-sync-commands;
#X obj 23 56 route length start-sync freeStart startAt stop ticks,
f 104;
#N canvas 523 410 450 300 freeStart 0;
#X obj 240 146 s \$0-count-ticks-spigot;
#X obj 240 119 0;
#X obj 51 232 1;
#X text 263 121 turn off;
#X obj 51 96 t b b b b, f 32;
#X obj 177 155 0;
#X obj 177 180 s \$0-erase;
#X obj 51 20 inlet;
#X text 102 27 bang;
#X obj 51 257 s \$0-count-ticks-spigot;
#X text 81 237 open spigot and start counting immediatley;
#X obj 114 209 s \$0-update-length;
#X connect 1 0 0 0;
#X connect 2 0 9 0;
#X connect 4 0 2 0;
#X connect 4 1 11 0;
#X connect 4 2 5 0;
#X connect 4 3 1 0;
#X connect 5 0 6 0;
#X connect 7 0 4 0;
#X restore 230 208 pd freeStart;
#N canvas 981 411 450 485 startAt 0;
#X obj 240 146 s \$0-count-ticks-spigot;
#X obj 240 119 0;
#X obj 51 302 1;
#X text 263 121 turn off;
#X obj 192 148 0;
#X obj 192 173 s \$0-erase;
#X obj 51 20 inlet;
#X text 102 27 bang;
#X obj 51 327 s \$0-count-ticks-spigot;
#X text 81 307 open spigot and start counting immediatley;
#X obj 98 260 s \$0-update-length;
#X obj 145 223 s \$0-set-new-start;
#X obj 51 96 t b b f b b, f 32;
#X obj 145 157 * 360;
#X obj 145 178 i;
#X connect 1 0 0 0;
#X connect 2 0 8 0;
#X connect 4 0 5 0;
#X connect 6 0 12 0;
#X connect 12 0 2 0;
#X connect 12 1 10 0;
#X connect 12 2 13 0;
#X connect 12 3 4 0;
#X connect 12 4 1 0;
#X connect 13 0 14 0;
#X connect 14 0 11 0;
#X restore 333 161 pd startAt;
#N canvas 4 50 450 300 stop 0;
#X obj 34 7 inlet;
#X obj 34 68 t b b b, f 23;
#X obj 101 185 s \$0-erase;
#X obj 101 164 0;
#X obj 196 137 s \$0-start-sync-spigot;
#X obj 169 160 s \$0-count-ticks-spigot;
#X obj 169 93 0;
#X obj 169 114 t f f;
#X obj 34 231 s \$0-update-length;
#X connect 0 0 1 0;
#X connect 1 0 8 0;
#X connect 1 1 3 0;
#X connect 1 2 6 0;
#X connect 3 0 2 0;
#X connect 6 0 7 0;
#X connect 7 0 5 0;
#X connect 7 1 4 0;
#X restore 446 186 pd stop;
#X connect 0 0 4 0;
#X connect 4 0 2 0;
#X connect 4 1 3 0;
#X connect 4 2 5 0;
#X connect 4 3 6 0;
#X connect 4 4 7 0;
#X connect 4 5 1 0;
#X restore 6 35 pd messages;
#X obj 142 65 r \$0-ticks;
#X obj 142 127 t b f, f 16;
#N canvas 479 239 830 658 start-sync-bang 0;
#X obj 90 93 spigot 0;
#X obj 248 114 f 0;
#X obj 90 257 f 1;
#X obj 90 136 t f f;
#X obj 90 184 sel 1;
#X obj 90 163 < 0, f 8;
#X obj 135 135 r \$0-erase;
#X obj 90 211 t b b, f 9;
#X obj 90 30 inlet;
#X obj 135 45 r \$0-start-sync-spigot;
#X obj 90 285 s \$0-count-ticks-spigot;
#X connect 0 0 3 0;
#X connect 1 0 0 1;
#X connect 2 0 10 0;
#X connect 3 0 5 1;
#X connect 3 1 5 0;
#X connect 4 0 7 0;
#X connect 5 0 4 0;
#X connect 6 0 5 1;
#X connect 7 0 2 0;
#X connect 7 1 1 0;
#X connect 8 0 0 0;
#X connect 9 0 0 1;
#X restore 235 152 pd start-sync-bang;
#X obj 142 218 spigot 0;
#N canvas 4 50 450 300 tick-count 0;
#X obj 25 9 inlet;
#X obj 70 71 r \$0-erase;
#X obj 25 106 f, f 8;
#X obj 117 106 + 1;
#X obj 25 138 t f f;
#X text 66 5 bang;
#X obj 25 199 outlet;
#X obj 25 159 i;
#X obj 55 41 r \$0-set-new-start;
#X connect 0 0 2 0;
#X connect 1 0 2 1;
#X connect 2 0 4 0;
#X connect 3 0 2 1;
#X connect 4 0 7 0;
#X connect 4 1 3 0;
#X connect 7 0 6 0;
#X connect 8 0 2 1;
#X restore 142 288 pd tick-count;
#X obj 301 359 s \$0-check;
#X obj 142 470 outlet;
#X obj 503 179 * 360;
#X obj 503 200 i;
#X obj 503 152 f \$1;
#X obj 503 93 r \$0-length;
#X obj 523 117 r \$0-update-length;
#X obj 470 61 r \$0-check;
#X obj 470 285 sel 1;
#X text 517 255 if over or equal to;
#X text 498 13 Arg1: length to loop in beats;
#X text 512 285 do;
#X obj 470 321 f 0;
#X obj 470 342 s \$0-erase;
#X text 190 471 new tick count;
#X obj 187 193 r \$0-count-ticks-spigot;
#X obj 503 221 - 1;
#X obj 470 255 >= 359;
#X obj 142 329 t f f f, f 27;
#X obj 221 404 sel 0;
#X obj 221 425 outlet;
#X text 266 425 top of the bar;
#X connect 0 0 1 0;
#X connect 2 0 3 0;
#X connect 3 0 5 0;
#X connect 3 1 4 0;
#X connect 5 0 6 0;
#X connect 6 0 25 0;
#X connect 9 0 10 0;
#X connect 10 0 23 0;
#X connect 11 0 9 0;
#X connect 12 0 11 0;
#X connect 13 0 11 0;
#X connect 14 0 24 0;
#X connect 15 0 19 0;
#X connect 19 0 20 0;
#X connect 22 0 5 1;
#X connect 23 0 24 1;
#X connect 24 0 15 0;
#X connect 25 0 8 0;
#X connect 25 1 26 0;
#X connect 25 2 7 0;
#X connect 26 0 27 0;
