#N canvas 318 50 1533 907 10;
#N canvas 272 50 572 297 phase-tables 0;
#X obj 51 108 array define prev-real1 4096;
#X obj 277 108 array define prev-real2 4096;
#X obj 51 138 array define prev-imag1 4096;
#X obj 277 138 array define prev-imag2 4096;
#X restore 20 103 pd phase-tables;
#X obj 946 720 s transpo;
#N canvas 15 73 1127 584 hann-window 0;
#N canvas 0 50 450 300 (subpatch) 0;
#X array \$0-hann 1024 float 0;
#X coords 0 1 1023 0 300 100 1 0 0;
#X restore 82 311 graph;
#X obj 378 165 osc~;
#X obj 378 190 *~ -0.5;
#X obj 378 214 +~ 0.5;
#X obj 331 247 tabwrite~ \$0-hann;
#X obj 37 88 r window-size;
#X obj 38 173 /;
#X obj 127 142 samplerate~;
#X obj 38 251 s window-sec;
#X obj 177 204 swap;
#X obj 177 228 /;
#X obj 177 252 s window-hz;
#X obj 49 201 * 1000;
#X obj 49 228 s window-msec;
#X obj 38 115 t f b f;
#X msg 173 92 resize \$1;
#X obj 173 116 s \$0-hann;
#X obj 330 105 r window-hz;
#X msg 382 130 0;
#X obj 330 131 t f b;
#X text 18 10 calculate Hann window table (variable window size) and
constants window-hz (fundamental frequency of analysis) \, window-sec
and window-msec (analysis window size in seconds and msec).;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 5 0 14 0;
#X connect 6 0 8 0;
#X connect 6 0 12 0;
#X connect 7 0 6 1;
#X connect 7 0 9 1;
#X connect 9 0 10 0;
#X connect 9 1 10 1;
#X connect 10 0 11 0;
#X connect 12 0 13 0;
#X connect 14 0 6 0;
#X connect 14 0 9 0;
#X connect 14 1 7 0;
#X connect 14 2 15 0;
#X connect 15 0 16 0;
#X connect 17 0 19 0;
#X connect 18 0 1 1;
#X connect 19 0 1 0;
#X connect 19 1 4 0;
#X connect 19 1 18 0;
#X restore 20 127 pd hann-window;
#X obj 33 873 throw~ outL;
#X obj 144 873 throw~ outR;
#X obj 662 412 r knob1;
#X obj 895 365 r knob2;
#X obj 895 503 * 2400;
#X obj 895 530 - 1200;
#X obj 995 274 r notes;
#X obj 995 304 stripnote;
#X obj 700 525 f;
#X obj 700 556 s speed;
#X obj 895 710 i;
#X obj 895 741 change -1;
#X msg 895 763 \; screenLine2 2: Tune \$1 cents;
#X obj 662 494 i;
#X obj 662 576 change -1;
#X msg 662 598 \; screenLine1 1: Speed \$1 %;
#N canvas 9 50 673 407 pvoc-info 0;
#X text 37 61 This patch takes a sound \, analyzes windows in it both
for channel magnitude and for phase precession in each channel (compared
to another operlapping window). The real-time output recreates the
same magnitudes and phase precession \, althought the phases themselves
are in general different. You can control either the location or its
motion (setting location stops motion \, while setting a non-zero motion
causes the location to change automatically). "Rewind" goes back to
the beginning. You can use different window sizes (use the message
boxes - the number box is for readout). The "lock" feature forces phase
coherency between neighboring channels \, which makes a more present
sound but can add artifacts to the sound. Look in "pd fft-analysis"
to see the workings.;
#X text 117 33 PHASE VOCODER FOR TIME STRETCHING AND CONTRACTION;
#X text 125 242 updated for Pd version 0.44;
#X restore 20 77 pd pvoc-info;
#N canvas 112 50 1162 784 fft-analysis1 0;
#X obj 51 477 *~;
#X obj 18 477 *~;
#X obj 18 499 -~;
#X obj 167 475 *~;
#X obj 136 475 *~;
#X obj 136 497 +~;
#X obj 109 193 *~;
#X obj 78 193 *~;
#X obj 50 193 *~;
#X obj 19 193 *~;
#X obj 19 218 +~;
#X obj 127 379 *~;
#X obj 20 622 *~;
#X obj 238 430 rfft~;
#X obj 108 161 rfft~;
#X obj 19 564 rifft~;
#X obj 19 727 outlet~;
#X obj 97 379 *~;
#X obj 97 401 +~;
#X obj 124 218 -~;
#X obj 18 431 *~;
#X obj 51 432 *~;
#X obj 127 622 r window-size;
#X obj 19 349 +~ 1e-15;
#X obj 19 598 *~;
#X obj 52 598 tabreceive~ \$0-hann;
#X obj 127 643 expr 2/(3*$f1);
#X obj 97 425 q8_rsqrt~;
#N canvas 96 50 1645 873 read-windows 0;
#X obj 18 803 *~;
#X obj 1101 150 r window-size;
#X obj 34 164 f;
#X obj 1237 604 r window-size;
#X obj 1238 650 /;
#X obj 195 805 *~;
#X obj -1 106 bang~;
#X obj 1237 677 * 1000;
#X obj 76 166 +;
#X obj 156 136 *;
#X obj 56 232 / 1000;
#X obj 34 255 *;
#X text 66 255 reading location (samples);
#X obj 51 597 / 4;
#X obj 156 106 * 0.01;
#X obj 1101 176 *;
#X obj 1201 118 r transpo;
#X obj 1201 140 * 0.01;
#X obj 1203 161 + 69;
#X obj 1204 182 mtof;
#X obj 1204 204 / 440;
#X obj 1136 176 t b f;
#X obj 19 849 outlet~;
#X obj 195 850 outlet~;
#X obj 214 664 tabreceive~ \$0-hann;
#X msg 953 399 0;
#X msg 918 522 set \$1;
#X obj 918 547 s speed-set;
#X text 1182 513 stretched window size (samples);
#X obj 1027 497 r transpo;
#X msg 1027 523 set \$1;
#X obj 1027 548 s transpo-set;
#X msg 976 268 set \$1;
#X obj 958 130 t b f;
#X obj 976 247 f;
#X obj 904 161 int;
#X obj 904 193 sel 0;
#X msg 963 164 1;
#X msg 963 187 0;
#X obj 904 218 del 300;
#X obj 976 292 s location-set;
#X obj 56 208 r \$0-insamprate;
#X obj 1318 282 r rewind;
#X floatatom 1246 700 5 0 0 0 - - -, f 5;
#X obj 1237 628 t f b;
#X obj 1277 652 samplerate~;
#X obj 1237 721 / 4;
#X obj 76 188 s see-loc;
#X obj 967 106 r see-loc;
#X obj 71 281 / 2;
#X obj 34 281 -;
#X text 107 278 back up 1/2 window;
#X obj 16 597 -~;
#X text 43 6 Read two windows out of the recorded sample \, one 1/4
ahead of the other. The mid point of the front window is specified
by "location". If "speed" is nonzero \, "location" automatically precesses.
;
#X obj 1318 416 * -0.5;
#X text 81 601 "back" window 1/4 cycle behind "front" one;
#X text 1272 718 computation period (msec) for overlap of 4;
#X text 1299 699 msec in a window;
#X obj 1318 362 /;
#X obj 1318 387 * 1000;
#X obj 1318 338 t f b;
#X obj 1358 362 samplerate~;
#X obj 1318 315 f;
#X msg 995 701 \; rewind bang \; speed \$1;
#X obj 995 674 r auto;
#X obj 880 675 r no-detune;
#X text 611 31 if location changes \, update number box;
#X text 760 40 in main window via "location-set" \, but;
#X text 763 59 taking care to limit frequency of updates.;
#X text 906 452 reflect control changes;
#X text 906 469 in main window.;
#X text 904 334 setting location by hand;
#X text 902 352 sets speed to zero.;
#X text 910 643 misc controls;
#X text 1286 223 "rewind" control takes us;
#X text 1289 241 to a location depending on;
#X text 1289 260 stretched window size.;
#X obj 16 469 f;
#X obj 17 496 pack;
#X obj 21 436 b;
#X msg 880 697 \; transpo 0;
#X obj 228 534 pack 0 \$0;
#X msg 228 564 set \$2-sample\$1;
#X obj 406 98 sel 0 1, f 16;
#X msg 509 155 1;
#X obj 289 265 f;
#X obj 95 136 f;
#X obj 477 128 t b b;
#X msg 470 162 bang;
#X msg 408 132 0;
#X obj -1 133 spigot 0;
#X obj 17 637 tabread4~ \$0-sample1;
#X obj 194 637 tabread4~ \$0-sample1;
#X msg 17 523 0 0 \, \$1 \$2 0;
#X obj 17 551 vline~;
#X obj 68 96 r location1;
#X obj 958 84 r location1;
#X obj 953 376 r location1;
#X msg 1318 440 \; location1 \$1;
#X obj 465 658 / 4;
#X obj 430 658 -~;
#X text 495 662 "back" window 1/4 cycle behind "front" one;
#X obj 430 530 f;
#X obj 431 557 pack;
#X obj 429 501 b;
#X obj 431 698 tabread4~ \$0-sample1;
#X obj 608 698 tabread4~ \$0-sample1;
#X msg 431 584 0 0 \, \$1 \$2 0;
#X obj 431 612 vline~;
#X obj 34 316 s \$0-tabread-right;
#X obj 8 398 r \$0-tabread-right;
#X obj 1100 204 s \$0-2-window;
#X obj 1389 288 r \$0-2-window;
#X obj 68 552 r \$0-2-window;
#X obj 48 436 r \$0-2-window;
#X obj 179 229 r \$0-2-window;
#X obj 459 299 f;
#X obj 424 241 bang~;
#X obj 501 301 +;
#X obj 581 271 *;
#X obj 481 367 / 1000;
#X obj 459 390 *;
#X text 491 390 reading location (samples);
#X obj 581 241 * 0.01;
#X obj 481 343 r \$0-insamprate;
#X obj 496 416 / 2;
#X obj 459 416 -;
#X text 532 413 back up 1/2 window;
#X obj 493 263 f;
#X obj 424 268 spigot 0;
#X obj 459 438 s \$0-tabread-right2;
#X obj 429 471 r \$0-tabread-right2;
#X obj 611 591 r \$0-tabread-right2;
#X obj 493 231 r location2;
#X obj 655 514 pack 0 \$0;
#X msg 655 544 set \$2-sample\$1;
#X obj 664 128 sel 0 1, f 16;
#X msg 767 185 1;
#X obj 767 241 f;
#X obj 735 158 t b b;
#X msg 728 192 bang;
#X msg 666 162 0;
#X obj 1237 743 s \$0-window-size4;
#X obj 241 92 r \$0-window-size4;
#X obj 632 281 r \$0-window-size4;
#X obj 49 477 r \$0-window-size4;
#X obj 223 478 r fft1-point;
#X obj 406 73 r fft1-start;
#X obj 676 99 r fft2-start;
#X obj 654 487 r fft2-point;
#X obj 467 501 r \$0-2-window;
#X obj 604 364 r \$0-2-window;
#X obj 501 323 s see-loc2;
#X msg 1394 160 set \$1;
#X obj 1376 22 t b f;
#X obj 1394 139 f;
#X obj 1322 53 int;
#X obj 1322 85 sel 0;
#X msg 1381 56 1;
#X msg 1381 79 0;
#X obj 1322 110 del 300;
#X obj 1376 -24 r location2;
#X obj 1385 -2 r see-loc2;
#X obj 1394 184 s location-set2;
#X msg 1044 400 0;
#X obj 1044 377 r location2;
#X obj 479 525 r \$0-window-size4;
#X obj 482 627 r \$0-2-window;
#X obj 581 218 r speed2;
#X obj 156 83 r speed1;
#X obj 953 422 s speed1;
#X obj 1044 423 s speed2;
#X obj 1487 288 r rewind;
#X obj 1487 422 * -0.5;
#X obj 1487 368 /;
#X obj 1487 393 * 1000;
#X obj 1487 344 t f b;
#X obj 1527 368 samplerate~;
#X obj 1487 321 f;
#X obj 1558 294 r \$0-2-window;
#X msg 1487 446 \; location2 \$1;
#X obj 564 105 r speed;
#X obj 554 161 s speed1;
#X obj 578 139 s speed2;
#X obj 918 498 r speed1;
#X obj 218 441 r \$0-tabread-right;
#X obj 431 720 delwrite~ del1 20;
#X obj 608 723 delwrite~ del2 20;
#X obj 438 762 delread~ del2 3.4;
#X obj 261 759 delread~ del1 3.4;
#X obj 195 827 *~ 0.5;
#X obj 18 825 *~ 0.5;
#X connect 0 0 191 0;
#X connect 1 0 15 0;
#X connect 2 0 8 0;
#X connect 2 0 11 0;
#X connect 3 0 44 0;
#X connect 4 0 7 0;
#X connect 5 0 190 0;
#X connect 6 0 90 0;
#X connect 7 0 43 0;
#X connect 7 0 46 0;
#X connect 8 0 2 1;
#X connect 8 0 47 0;
#X connect 9 0 8 1;
#X connect 10 0 11 1;
#X connect 11 0 50 0;
#X connect 13 0 52 1;
#X connect 14 0 9 0;
#X connect 15 0 111 0;
#X connect 16 0 17 0;
#X connect 17 0 18 0;
#X connect 18 0 19 0;
#X connect 19 0 20 0;
#X connect 20 0 21 0;
#X connect 21 0 15 0;
#X connect 21 1 15 1;
#X connect 24 0 5 1;
#X connect 24 0 0 1;
#X connect 25 0 170 0;
#X connect 26 0 27 0;
#X connect 29 0 30 0;
#X connect 30 0 31 0;
#X connect 32 0 40 0;
#X connect 33 0 35 0;
#X connect 33 1 34 1;
#X connect 34 0 32 0;
#X connect 35 0 36 0;
#X connect 36 0 37 0;
#X connect 36 0 39 0;
#X connect 37 0 35 1;
#X connect 38 0 35 1;
#X connect 39 0 38 0;
#X connect 39 0 34 0;
#X connect 41 0 10 0;
#X connect 42 0 62 0;
#X connect 44 0 4 0;
#X connect 44 1 45 0;
#X connect 45 0 4 1;
#X connect 46 0 142 0;
#X connect 48 0 33 0;
#X connect 49 0 50 1;
#X connect 50 0 109 0;
#X connect 52 0 91 0;
#X connect 54 0 98 0;
#X connect 58 0 59 0;
#X connect 59 0 54 0;
#X connect 60 0 58 0;
#X connect 60 1 61 0;
#X connect 61 0 58 1;
#X connect 62 0 60 0;
#X connect 64 0 63 0;
#X connect 65 0 80 0;
#X connect 77 0 78 0;
#X connect 78 0 93 0;
#X connect 79 0 77 0;
#X connect 81 0 82 0;
#X connect 82 0 91 0;
#X connect 82 0 92 0;
#X connect 83 0 89 0;
#X connect 83 1 87 0;
#X connect 84 0 85 0;
#X connect 85 0 90 1;
#X connect 86 0 2 1;
#X connect 87 0 88 0;
#X connect 87 1 84 0;
#X connect 88 0 86 0;
#X connect 89 0 85 0;
#X connect 90 0 2 0;
#X connect 91 0 0 0;
#X connect 92 0 5 0;
#X connect 93 0 94 0;
#X connect 94 0 52 0;
#X connect 94 0 92 0;
#X connect 95 0 86 0;
#X connect 96 0 33 0;
#X connect 97 0 25 0;
#X connect 99 0 100 1;
#X connect 100 0 105 0;
#X connect 102 0 103 0;
#X connect 103 0 107 0;
#X connect 104 0 102 0;
#X connect 105 0 186 0;
#X connect 106 0 187 0;
#X connect 107 0 108 0;
#X connect 108 0 100 0;
#X connect 108 0 106 0;
#X connect 110 0 79 0;
#X connect 112 0 62 1;
#X connect 113 0 13 0;
#X connect 114 0 77 1;
#X connect 115 0 49 0;
#X connect 116 0 118 0;
#X connect 116 0 121 0;
#X connect 117 0 129 0;
#X connect 118 0 116 1;
#X connect 118 0 152 0;
#X connect 119 0 118 1;
#X connect 120 0 121 1;
#X connect 121 0 126 0;
#X connect 123 0 119 0;
#X connect 124 0 120 0;
#X connect 125 0 126 1;
#X connect 126 0 130 0;
#X connect 128 0 116 1;
#X connect 129 0 116 0;
#X connect 131 0 104 0;
#X connect 132 0 106 1;
#X connect 132 0 105 1;
#X connect 133 0 128 0;
#X connect 134 0 135 0;
#X connect 135 0 105 0;
#X connect 135 0 106 0;
#X connect 136 0 141 0;
#X connect 136 1 139 0;
#X connect 137 0 138 0;
#X connect 138 0 129 1;
#X connect 139 0 140 0;
#X connect 139 1 137 0;
#X connect 140 0 128 0;
#X connect 141 0 138 0;
#X connect 143 0 9 1;
#X connect 144 0 119 1;
#X connect 145 0 78 1;
#X connect 146 0 81 0;
#X connect 147 0 83 0;
#X connect 148 0 136 0;
#X connect 149 0 134 0;
#X connect 150 0 102 1;
#X connect 151 0 125 0;
#X connect 153 0 163 0;
#X connect 154 0 156 0;
#X connect 154 1 155 1;
#X connect 155 0 153 0;
#X connect 156 0 157 0;
#X connect 157 0 158 0;
#X connect 157 0 160 0;
#X connect 158 0 156 1;
#X connect 159 0 156 1;
#X connect 160 0 159 0;
#X connect 160 0 155 0;
#X connect 161 0 154 0;
#X connect 162 0 154 0;
#X connect 164 0 171 0;
#X connect 165 0 164 0;
#X connect 166 0 103 1;
#X connect 167 0 99 0;
#X connect 168 0 123 0;
#X connect 169 0 14 0;
#X connect 172 0 178 0;
#X connect 173 0 180 0;
#X connect 174 0 175 0;
#X connect 175 0 173 0;
#X connect 176 0 174 0;
#X connect 176 1 177 0;
#X connect 177 0 174 1;
#X connect 178 0 176 0;
#X connect 179 0 178 1;
#X connect 181 0 182 0;
#X connect 181 0 183 0;
#X connect 184 0 26 0;
#X connect 185 0 91 1;
#X connect 185 0 92 1;
#X connect 188 0 5 0;
#X connect 189 0 0 0;
#X connect 190 0 23 0;
#X connect 191 0 22 0;
#X restore 109 133 pd read-windows;
#X text 272 5 recall previous output amplitude. Its phase will be added
to the phase difference we measure from two windows in the the recorded
sound.;
#X obj 121 69 *~;
#X obj 89 69 *~;
#X obj 89 91 +~;
#X obj 159 94 q8_rsqrt~;
#X obj 159 71 +~ 1e-20;
#X obj 73 119 *~;
#X obj 19 118 *~;
#X obj 29 245 lrshift~ 1;
#X obj 24 269 lrshift~ -1;
#X obj 141 245 lrshift~ 1;
#X obj 133 269 lrshift~ -1;
#X obj 19 325 +~;
#X obj 125 331 +~;
#X text 247 66 divide by the magnitude to make a unit-magnitude complex
amplitude (phase only). The 1e-20 is to prevent overflows. q8_rsqrt~
is reciprocal square root.;
#X text 247 165 Take FT of the window in back. Multiply its conjugate
by the normalized previous output. The result has the magnitude of
the input sound and phase (previous output phase) minus (back window
phase).;
#X text 249 370 Normalize again \, this time taking care to salt each
channel with 1e-15 so that we get a unit complex number even if everything
was zero heretofore.;
#X text 288 427 Now take the FT of the forward window and multiply
it by the unit complex number from above. The magnitude will be that
of the forward window and the phase will be the previous output phase
plus the phase difference between the two analysis windows -- except
that if "lock" is on \, they will be modified to agree progressively
better with the inter-channel phase relationships of the input.;
#X text 249 242 If "lock" is on \, encourage neighboring channels to
stay in phase by adding the two neighboring complex amplitudes. The
result will tend toward the channel with the strongest amplitude. If
the phase relationships between channels in the output and those in
the input are in parallel \, then neighboring channels of the quotient
will all have the same phase and this will not change any phases. (lrshift
shifts the signal to the left or right depending on its argument.)
;
#X text 259 126 Read two windows \, one 1/4 length behind the other
\, of the input sound \, with Hann window function (see inside).;
#X obj 137 543 tabsend~ prev-imag1;
#X obj 136 567 tabsend~ prev-real1;
#X obj 20 8 tabreceive~ prev-real1;
#X obj 73 29 tabreceive~ prev-imag1;
#X obj 159 312 *~ 0;
#X obj 35 300 *~ 0;
#X obj 177 352 r lock;
#X obj 20 663 hip~ 5;
#X obj 20 685 lop~ 9000;
#X obj 591 563 loadbang;
#X obj 745 621 samplerate~;
#X obj 745 645 s \$0-insamprate;
#X obj 745 586 bang;
#X obj 745 556 loadbang;
#X obj 801 396 s lock;
#X obj 801 365 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 931 497 * 2;
#X floatatom 899 521 5 0 0 0 - - -, f 5;
#X obj 885 465 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 899 499 f 1;
#X msg 919 455 1;
#X msg 591 589 \; pd dsp 1 \; window-size 1024 \; transpo 0 \; lock
1 \; rewind bang \; speed 100 \;;
#X obj 412 590 r window-size;
#X obj 426 644 block~;
#X msg 426 619 set \$1 4;
#X connect 0 0 2 1;
#X connect 1 0 2 0;
#X connect 2 0 15 0;
#X connect 2 0 50 0;
#X connect 3 0 5 1;
#X connect 4 0 5 0;
#X connect 5 0 15 1;
#X connect 5 0 49 0;
#X connect 6 0 19 1;
#X connect 7 0 19 0;
#X connect 8 0 10 1;
#X connect 9 0 10 0;
#X connect 10 0 38 0;
#X connect 10 0 37 0;
#X connect 10 0 41 0;
#X connect 11 0 18 1;
#X connect 12 0 56 0;
#X connect 13 0 1 1;
#X connect 13 0 3 1;
#X connect 13 1 0 1;
#X connect 13 1 4 1;
#X connect 14 0 9 1;
#X connect 14 0 7 1;
#X connect 14 1 6 1;
#X connect 14 1 8 1;
#X connect 15 0 24 0;
#X connect 17 0 18 0;
#X connect 18 0 27 0;
#X connect 19 0 39 0;
#X connect 19 0 40 0;
#X connect 19 0 42 0;
#X connect 20 0 1 0;
#X connect 20 0 4 0;
#X connect 21 0 0 0;
#X connect 21 0 3 0;
#X connect 22 0 26 0;
#X connect 23 0 17 1;
#X connect 23 0 17 0;
#X connect 23 0 20 0;
#X connect 24 0 12 0;
#X connect 25 0 24 1;
#X connect 26 0 12 1;
#X connect 27 0 20 1;
#X connect 27 0 21 1;
#X connect 28 0 14 0;
#X connect 28 1 13 0;
#X connect 30 0 32 1;
#X connect 31 0 32 0;
#X connect 32 0 34 0;
#X connect 33 0 35 1;
#X connect 33 0 36 1;
#X connect 34 0 33 0;
#X connect 35 0 8 0;
#X connect 35 0 7 0;
#X connect 36 0 9 0;
#X connect 36 0 6 0;
#X connect 37 0 54 0;
#X connect 38 0 54 0;
#X connect 39 0 53 0;
#X connect 40 0 53 0;
#X connect 41 0 23 0;
#X connect 42 0 11 0;
#X connect 42 0 11 1;
#X connect 42 0 21 0;
#X connect 51 0 31 1;
#X connect 51 0 31 0;
#X connect 51 0 36 0;
#X connect 52 0 30 1;
#X connect 52 0 30 0;
#X connect 52 0 35 0;
#X connect 53 0 42 1;
#X connect 54 0 41 1;
#X connect 55 0 54 1;
#X connect 55 0 53 1;
#X connect 56 0 57 0;
#X connect 57 0 16 0;
#X connect 58 0 70 0;
#X connect 59 0 60 0;
#X connect 61 0 59 0;
#X connect 62 0 61 0;
#X connect 64 0 63 0;
#X connect 65 0 68 1;
#X connect 67 0 68 0;
#X connect 68 0 65 0;
#X connect 68 0 66 0;
#X connect 69 0 68 1;
#X connect 71 0 73 0;
#X connect 73 0 72 0;
#X restore 33 191 pd fft-analysis1;
#X obj 567 152 r~ inL;
#X obj 675 149 r~ inR;
#X obj 121 522 hip~ 5;
#X obj 121 480 *~ 0.7;
#X obj 206 479 *~ 0.7;
#X obj 120 603 *~, f 17;
#X obj 312 364 * 100;
#X obj 312 389 i;
#X obj 566 180 hip~ 4;
#X obj 676 179 hip~ 4;
#X obj 122 407 r~ inL;
#X obj 208 405 r~ inR;
#X obj 122 429 hip~ 4;
#X obj 121 455 lop~ 10000;
#X obj 207 430 hip~ 4;
#X obj 206 456 lop~ 10000;
#X obj 662 469 + 1;
#X obj 895 577 max -1200;
#X obj 895 599 min 1200;
#X obj 895 552 i;
#X obj 662 444 * 99;
#X obj 92 240 r on/off;
#X obj 92 334 line~;
#X obj 33 672 *~;
#X obj 92 262 sel 0 1;
#X msg 92 284 0 20;
#X obj 271 153 r on/off;
#X obj 271 175 sel 0 1;
#X obj 271 264 s screenLine5;
#X msg 294 226 Phase Vocoder On;
#X msg 271 203 Phase Vocoder Off;
#X obj 946 693 line 1 1;
#X msg 946 669 \$1 10;
#X msg 132 284 1 10;
#X obj 32 372 *~;
#X obj 933 132 text define tune;
#X obj 933 36 loadbang;
#X msg 933 58 read tune.txt;
#N canvas 7 50 1264 870 print-tune 0;
#X obj 476 291 text get tune;
#X obj 202 85 inlet;
#X obj 202 107 moses 0, f 13;
#X obj 290 142 sel 0, f 27;
#X obj 476 202 / 100;
#X obj 476 264 i;
#X obj 202 273 text get tune;
#X obj 202 184 / 100;
#X obj 202 246 i;
#X obj 202 129 abs;
#X obj 202 301 list prepend -;
#X obj 476 334 list prepend +;
#X msg 290 164 Unison;
#X obj 476 224 + 0.499999;
#X obj 202 206 + 0.499999;
#X obj 476 504 s screenLine5;
#X obj 476 474 list prepend Interval:;
#X connect 0 0 11 0;
#X connect 1 0 2 0;
#X connect 2 0 9 0;
#X connect 2 1 3 0;
#X connect 3 0 12 0;
#X connect 3 1 4 0;
#X connect 4 0 13 0;
#X connect 5 0 0 0;
#X connect 6 0 10 0;
#X connect 7 0 14 0;
#X connect 8 0 6 0;
#X connect 9 0 7 0;
#X connect 10 0 16 0;
#X connect 11 0 16 0;
#X connect 12 0 16 0;
#X connect 13 0 5 0;
#X connect 14 0 8 0;
#X connect 16 0 15 0;
#X restore 1011 648 pd print-tune;
#X obj 565 206 lop~ 10000;
#X obj 675 205 lop~ 10000;
#X obj 1262 536 i;
#X obj 33 213 *~ 2;
#N canvas 182 50 1459 847 record-stream 0;
#X obj 323 585 *~, f 8;
#X obj 324 512 hip~ 5;
#X obj 415 -57 r fs;
#X obj 448 -57 r aux;
#X obj 598 -46 loadbang;
#X obj 415 46 % 2;
#X obj 415 -10 sel 1;
#X text 284 203 toggle metro;
#X obj 415 123 metro 500;
#X obj 434 91 s led;
#X obj 415 21 float;
#X obj 462 21 + 1;
#X obj 415 150 float;
#X obj 472 150 + 1;
#X obj 415 175 % 4;
#X obj 375 253 sel 0 1 2 3;
#X obj 399 499 -~ 0.5;
#X obj 399 521 *~ 0.5;
#X obj 399 543 cos~;
#X obj 484 534 pack 0 \$0;
#X msg 484 564 set \$2-sample\$1;
#X obj 324 436 *~ 0.7;
#X obj 341 481 *~ 0.7;
#X obj 399 469 vline~;
#X obj 235 152 s \$0-record-chunk;
#X obj 505 53 r \$0-record-chunk;
#X obj 417 387 r \$0-record-chunk;
#X obj 505 75 / 2;
#X msg 399 438 0 0 \, 1 \$1 0;
#X obj 399 414 f;
#X obj 659 607 *~, f 8;
#X obj 660 534 hip~ 5;
#X obj 771 516 -~ 0.5;
#X obj 771 538 *~ 0.5;
#X obj 771 560 cos~;
#X obj 820 556 pack 0 \$0;
#X msg 820 586 set \$2-sample\$1;
#X obj 660 458 *~ 0.7;
#X obj 677 503 *~ 0.7;
#X obj 771 486 vline~;
#X obj 753 389 r \$0-record-chunk;
#X msg 735 460 0 0 \, 1 \$1 0;
#X obj 735 436 f;
#X msg 374 273 1;
#X msg 408 280 2;
#X msg 435 276 3;
#X msg 469 276 4;
#X msg 64 270 \; \$2-sample1 resize \$1 \; \$2-sample2 resize \$1 \;
\$2-sample3 resize \$1 \; \$2-sample4 resize \$1 \;;
#X text 111 24 in ms;
#X obj 65 51 r \$0-record-chunk;
#X obj 63 159 i;
#X obj 245 -39 loadbang;
#X obj 615 254 s fft1-point;
#X obj 55 449 outlet;
#X obj 55 421 r \$0-record-chunk;
#X obj 583 276 s fft1-start;
#X msg 583 245 1;
#X msg 716 237 1;
#X obj 716 206 t b b;
#X obj 748 254 s fft2-point;
#X obj 716 278 s fft2-start;
#X obj 912 256 s fft1-point;
#X obj 865 276 s fft1-start;
#X msg 865 245 1;
#X obj 865 204 t b b;
#X msg 1014 245 1;
#X obj 1015 201 t b b;
#X obj 1046 252 s fft2-point;
#X obj 1014 276 s fft2-start;
#X obj 583 204 t b b;
#X obj 324 679 tabwrite~ \$0-sample1;
#X obj 660 681 tabwrite~ \$0-sample1;
#X obj 48 506 array define \$0-sample1;
#X obj 48 526 array define \$0-sample2;
#X obj 48 546 array define \$0-sample3;
#X obj 48 566 array define \$0-sample4;
#X obj 64 220 pack 0 \$0;
#X msg 260 464 start 0;
#X msg 596 486 start 0;
#X obj 659 334 t f b b f b, f 23;
#X obj 323 332 t f b b f b, f 19;
#X obj 505 97 + 0.49999;
#X obj 505 119 i;
#X obj 235 102 max 100;
#X obj 487 409 inlet~;
#X obj 558 415 inlet~;
#X obj 235 124 min 8000;
#X msg 615 228 1;
#X msg 911 234 3;
#X msg 746 230 2;
#X msg 1047 228 4;
#X obj 65 108 * 44.1;
#X obj 64 180 + 6;
#X obj 583 139 sel 0 1 2 3, f 61;
#X obj 415 197 t a a;
#X obj 65 130 * 2;
#X msg 246 -6 1000;
#X obj 531 597 r on/off;
#X obj 531 619 sel 0;
#X msg 531 641 stop;
#X obj 336 87 s on/off;
#X connect 0 0 70 0;
#X connect 1 0 0 0;
#X connect 2 0 6 0;
#X connect 3 0 6 0;
#X connect 4 0 10 0;
#X connect 5 0 9 0;
#X connect 5 0 8 0;
#X connect 5 0 100 0;
#X connect 6 0 10 0;
#X connect 8 0 12 0;
#X connect 10 0 11 0;
#X connect 10 0 5 0;
#X connect 11 0 10 1;
#X connect 12 0 13 0;
#X connect 12 0 14 0;
#X connect 13 0 12 1;
#X connect 14 0 94 0;
#X connect 15 0 43 0;
#X connect 15 1 44 0;
#X connect 15 2 45 0;
#X connect 15 3 46 0;
#X connect 16 0 17 0;
#X connect 17 0 18 0;
#X connect 18 0 0 1;
#X connect 19 0 20 0;
#X connect 20 0 70 0;
#X connect 21 0 1 0;
#X connect 22 0 1 0;
#X connect 23 0 16 0;
#X connect 25 0 27 0;
#X connect 26 0 29 1;
#X connect 27 0 81 0;
#X connect 28 0 23 0;
#X connect 29 0 28 0;
#X connect 30 0 71 0;
#X connect 31 0 30 0;
#X connect 32 0 33 0;
#X connect 33 0 34 0;
#X connect 34 0 30 1;
#X connect 35 0 36 0;
#X connect 36 0 71 0;
#X connect 37 0 31 0;
#X connect 38 0 31 0;
#X connect 39 0 32 0;
#X connect 40 0 42 1;
#X connect 41 0 39 0;
#X connect 42 0 41 0;
#X connect 43 0 80 0;
#X connect 44 0 79 0;
#X connect 45 0 80 0;
#X connect 46 0 79 0;
#X connect 49 0 91 0;
#X connect 50 0 92 0;
#X connect 51 0 96 0;
#X connect 54 0 53 0;
#X connect 56 0 55 0;
#X connect 57 0 60 0;
#X connect 58 0 57 0;
#X connect 58 1 89 0;
#X connect 63 0 62 0;
#X connect 64 0 63 0;
#X connect 64 1 88 0;
#X connect 65 0 68 0;
#X connect 66 0 65 0;
#X connect 66 1 90 0;
#X connect 69 0 56 0;
#X connect 69 1 87 0;
#X connect 76 0 47 0;
#X connect 77 0 70 0;
#X connect 78 0 71 0;
#X connect 79 1 78 0;
#X connect 79 2 42 0;
#X connect 79 3 35 0;
#X connect 80 1 77 0;
#X connect 80 2 29 0;
#X connect 80 3 19 0;
#X connect 81 0 82 0;
#X connect 82 0 8 1;
#X connect 83 0 86 0;
#X connect 84 0 21 0;
#X connect 84 0 37 0;
#X connect 85 0 38 0;
#X connect 85 0 22 0;
#X connect 86 0 24 0;
#X connect 87 0 52 0;
#X connect 88 0 61 0;
#X connect 89 0 59 0;
#X connect 90 0 67 0;
#X connect 91 0 95 0;
#X connect 92 0 76 0;
#X connect 93 0 69 0;
#X connect 93 1 58 0;
#X connect 93 2 64 0;
#X connect 93 3 66 0;
#X connect 94 0 15 0;
#X connect 94 1 93 0;
#X connect 95 0 50 0;
#X connect 96 0 83 0;
#X connect 97 0 98 0;
#X connect 98 0 99 0;
#X connect 99 0 70 0;
#X connect 99 0 71 0;
#X restore 566 244 pd record-stream;
#N canvas 731 374 762 478 reverb 0;
#X obj 32 76 inlet~;
#X obj 88 95 inlet~;
#X obj 60 231 outlet~;
#X obj 119 231 outlet~;
#X obj 40 182 rev3~ 100 89 3000 20, f 21;
#X connect 0 0 4 0;
#X connect 1 0 4 1;
#X connect 4 0 2 0;
#X connect 4 1 3 0;
#X connect 4 2 2 0;
#X connect 4 3 3 0;
#X restore 147 775 pd reverb;
#X obj 148 831 *~;
#X obj 206 831 *~;
#X obj 164 682 cg-dw, f 13;
#X obj 296 527 cg-dw;
#X obj 164 649 r reverb-amt;
#X obj 1180 630 s reverb-amt;
#X obj 1270 503 * 100;
#X obj 32 715 *~ 1;
#X obj 32 777 *~;
#X obj 459 682 loadbang;
#X obj 296 330 r knob3;
#X msg 312 417 \; screenLine3 3: Dry/Wet: \$1%;
#X msg 1262 565 4: Reverb: \$1%;
#X obj 1262 597 s screenLine4;
#X obj 1201 387 r knob4;
#X obj 153 743 hip~ 50;
#X obj 153 721 lop~ 10000;
#X msg 459 734 \; screenLine5 Press Aux to Vocode;
#X obj 459 704 del 200;
#X text 48 46 Phase vocoder stuff;
#X text 133 548 Dry Signal In;
#X text 20 457 vocoder;
#X text 276 669 reverb dry/wet;
#X text 704 245 <--here is the record stream of incoming audio;
#X obj 895 476 line 1 1;
#X msg 895 433 \$1 20;
#X obj 995 347 abs;
#X obj 995 326 expr if ($f1 > 59 \, $f1 - 60 \, $f1 - 12);
#X obj 995 370 % 24;
#X obj 994 394 / 24;
#X connect 5 0 41 0;
#X connect 6 0 91 0;
#X connect 7 0 8 0;
#X connect 8 0 40 0;
#X connect 9 0 10 0;
#X connect 10 0 93 0;
#X connect 11 0 12 0;
#X connect 13 0 14 0;
#X connect 14 0 15 0;
#X connect 16 0 17 0;
#X connect 16 0 11 0;
#X connect 17 0 18 0;
#X connect 20 0 63 0;
#X connect 21 0 29 0;
#X connect 22 0 30 0;
#X connect 23 0 26 0;
#X connect 24 0 23 0;
#X connect 25 0 23 0;
#X connect 26 0 73 0;
#X connect 27 0 28 0;
#X connect 28 0 77 0;
#X connect 29 0 60 0;
#X connect 30 0 61 0;
#X connect 31 0 33 0;
#X connect 32 0 35 0;
#X connect 33 0 34 0;
#X connect 34 0 24 0;
#X connect 35 0 36 0;
#X connect 36 0 25 0;
#X connect 37 0 16 0;
#X connect 38 0 39 0;
#X connect 39 0 13 0;
#X connect 39 0 53 0;
#X connect 39 0 59 0;
#X connect 40 0 38 0;
#X connect 41 0 37 0;
#X connect 42 0 45 0;
#X connect 43 0 55 1;
#X connect 44 0 73 0;
#X connect 45 0 46 0;
#X connect 45 1 54 0;
#X connect 46 0 43 0;
#X connect 47 0 48 0;
#X connect 48 0 51 0;
#X connect 48 1 50 0;
#X connect 50 0 49 0;
#X connect 51 0 49 0;
#X connect 52 0 1 0;
#X connect 53 0 52 0;
#X connect 54 0 43 0;
#X connect 55 0 44 0;
#X connect 57 0 58 0;
#X connect 58 0 56 0;
#X connect 60 0 64 0;
#X connect 61 0 64 1;
#X connect 62 0 78 0;
#X connect 63 0 55 0;
#X connect 65 0 66 0;
#X connect 65 1 67 0;
#X connect 66 0 3 0;
#X connect 67 0 4 0;
#X connect 68 0 74 1;
#X connect 68 1 66 1;
#X connect 68 1 67 1;
#X connect 69 0 26 1;
#X connect 69 1 44 1;
#X connect 70 0 68 0;
#X connect 72 0 62 0;
#X connect 73 0 74 0;
#X connect 73 0 82 0;
#X connect 74 0 3 0;
#X connect 74 0 4 0;
#X connect 75 0 84 0;
#X connect 76 0 27 0;
#X connect 76 0 69 0;
#X connect 78 0 79 0;
#X connect 80 0 72 0;
#X connect 80 0 71 0;
#X connect 81 0 65 0;
#X connect 81 0 65 1;
#X connect 82 0 81 0;
#X connect 84 0 83 0;
#X connect 90 0 7 0;
#X connect 91 0 90 0;
#X connect 92 0 94 0;
#X connect 93 0 92 0;
#X connect 94 0 95 0;
#X connect 95 0 91 0;
