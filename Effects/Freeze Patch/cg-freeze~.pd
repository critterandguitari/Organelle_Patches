#N canvas 980 232 870 601 12;
#X obj 68 25 inlet~;
#X obj 190 23 inlet;
#X text 240 23 messages;
#N canvas 4 50 450 300 messages 0;
#X obj 37 37 inlet;
#X obj 37 85 s \$0-recTime;
#X obj 97 115 s \$0-maxTime;
#X obj 157 85 s \$0-detune;
#X obj 300 204 s \$0-direction;
#X obj 37 61 route recTime maxTime detune speed direction;
#X obj 219 118 s \$0-speed;
#X obj 318 138 sel 0 1;
#X obj 318 162 -1;
#X obj 349 163 1;
#X obj 134 194 s \$0-init;
#X obj 36 186 s \$0-freeze;
#X obj 36 161 route freeze init vol;
#X obj 119 246 s \$0-vol;
#X connect 0 0 5 0;
#X connect 5 0 1 0;
#X connect 5 1 2 0;
#X connect 5 2 3 0;
#X connect 5 3 6 0;
#X connect 5 4 7 0;
#X connect 5 5 12 0;
#X connect 7 0 8 0;
#X connect 7 1 9 0;
#X connect 8 0 4 0;
#X connect 9 0 4 0;
#X connect 12 0 11 0;
#X connect 12 1 10 0;
#X connect 12 2 13 0;
#X restore 190 47 pd messages;
#N canvas 278 143 1347 779 main-sample 0;
#X obj 98 85 inlet~;
#X text 981 84 max record time in ms;
#X msg 1081 183 const 0;
#N canvas 4 50 450 594 switch-trig 0;
#X obj 55 17 inlet;
#X obj 55 250 list prepend set;
#X obj 55 274 list trim;
#X obj 55 130 sel 0 1;
#X obj 55 298 outlet;
#X obj 55 80 == 0;
#X obj 55 200 symbol \$0-main1;
#X obj 114 170 symbol \$0-main2;
#X obj 55 53 v \$0-sample-switch;
#X connect 0 0 8 0;
#X connect 1 0 2 0;
#X connect 2 0 4 0;
#X connect 3 0 6 0;
#X connect 3 1 7 0;
#X connect 5 0 3 0;
#X connect 6 0 1 0;
#X connect 7 0 1 0;
#X connect 8 0 5 0;
#X restore 164 201 pd switch-trig;
#X msg 1013 216 const 0;
#X obj 852 370 t a a;
#N canvas 870 459 450 300 switch-tables 0;
#X obj 51 20 inlet;
#X obj 51 91 == 0;
#X text 95 92 invert;
#X obj 51 135 v \$0-sample-switch;
#X obj 51 47 v \$0-sample-switch;
#X connect 0 0 4 0;
#X connect 1 0 3 0;
#X connect 4 0 1 0;
#X restore 385 371 pd switch-tables;
#X obj 132 157 t b b;
#X obj 852 39 r \$0-init;
#X obj 362 119 r \$0-recTime;
#N canvas 4 50 530 412 delay 0;
#X obj 37 7 inlet;
#X obj 37 316 outlet;
#X obj 37 286 delay;
#X msg 139 237 stop;
#X obj 37 181 t b a b, f 15;
#X obj 69 78 samplerate~;
#X obj 69 102 / 1000;
#X obj 37 44 t a b;
#X obj 37 139 /;
#X connect 0 0 7 0;
#X connect 2 0 1 0;
#X connect 3 0 2 0;
#X connect 4 0 2 0;
#X connect 4 1 2 1;
#X connect 4 2 3 0;
#X connect 5 0 6 0;
#X connect 6 0 8 1;
#X connect 7 0 8 0;
#X connect 7 1 5 0;
#X connect 8 0 4 0;
#X restore 337 190 pd delay;
#X f 13;
#X obj 190 62 t b b, f 20;
#X obj 554 337 r \$0-recTime;
#X text 494 297 calculate new length in samples;
#X text 497 257 stop recording;
#X text 399 346 switch to new table;
#X obj 884 402 array size \$0-main2;
#X obj 852 430 array size \$0-main1;
#X obj 1013 243 array define \$0-main1;
#X obj 1081 212 array define \$0-main2;
#X obj 529 541 v \$0-main-sample-length;
#X text 348 81 delay for record time \, than turn off;
#X obj 98 405 tabwrite~ \$0-main1;
#X obj 337 508 outlet;
#X obj 337 259 t b b b b, f 21;
#X text 347 477 report rec done;
#X obj 190 28 r \$0-freeze;
#X obj 870 187 r \$0-recTime;
#X obj 852 216 \$1;
#X obj 337 150 f \$1;
#X obj 529 371 f \$1;
#X connect 0 0 22 0;
#X connect 2 0 19 0;
#X connect 3 0 22 0;
#X connect 4 0 18 0;
#X connect 5 0 17 0;
#X connect 5 1 16 0;
#X connect 7 0 22 0;
#X connect 7 1 3 0;
#X connect 8 0 2 0;
#X connect 8 0 4 0;
#X connect 8 0 28 0;
#X connect 9 0 29 1;
#X connect 10 0 24 0;
#X connect 11 0 7 0;
#X connect 11 1 29 0;
#X connect 12 0 30 1;
#X connect 24 0 23 0;
#X connect 24 1 6 0;
#X connect 24 2 30 0;
#X connect 26 0 11 0;
#X connect 27 0 28 1;
#X connect 28 0 5 0;
#X connect 29 0 10 0;
#X connect 30 0 20 0;
#X restore 69 92 pd main-sample;
#X obj 69 242 outlet~;
#X text 361 30 Arg1: max Table size in ms;
#N canvas 4 50 1392 882 grain-bank 0;
#X obj 134 775 outlet~;
#X msg 289 224 all note 0 0;
#X obj 25 15 inlet;
#X text 74 17 trigger;
#N canvas 414 112 836 705 trigger 0;
#X obj 29 19 inlet;
#X obj 29 540 outlet;
#X obj 171 215 max 1;
#X obj 171 243 until;
#X obj 171 284 f;
#X obj 210 285 + 1;
#X obj 171 310 t a a b;
#X obj 171 156 t a b a, f 13;
#X obj 332 228 swap 1;
#X obj 332 256 /, f 6;
#X obj 225 386 *;
#X obj 247 343 symbol phase;
#X obj 171 490 pack 0 s 0;
#N canvas 4 50 909 639 skew-notes 0;
#X obj 207 238 max 1;
#X obj 207 266 until;
#X obj 207 307 f;
#X obj 246 308 + 1;
#X obj 262 256 0;
#X obj 253 367 symbol note;
#X obj 207 333 t a a b;
#X obj 207 179 t a b a, f 13;
#X obj 207 450 pack 0 s 0 1;
#X obj 368 251 swap 1;
#X obj 368 279 /, f 6;
#X obj 261 409 *;
#X obj 208 129 inlet;
#X obj 207 474 outlet;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 2 0 6 0;
#X connect 3 0 2 1;
#X connect 4 0 2 1;
#X connect 5 0 8 1;
#X connect 6 0 8 0;
#X connect 6 1 11 0;
#X connect 6 2 5 0;
#X connect 7 0 0 0;
#X connect 7 1 4 0;
#X connect 7 2 9 0;
#X connect 8 0 13 0;
#X connect 9 0 10 0;
#X connect 9 1 10 1;
#X connect 10 0 11 1;
#X connect 11 0 8 2;
#X connect 12 0 7 0;
#X restore 29 323 pd skew-notes;
#X obj 29 84 t a a;
#X obj 225 232 0;
#X obj 239 455 wrap;
#X obj 194 355 + 0;
#X obj 29 51 6;
#X obj 66 225 t b;
#X msg 71 267 all note 0 1;
#X connect 0 0 18 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 4 0 6 0;
#X connect 5 0 4 1;
#X connect 6 0 12 0;
#X connect 6 1 17 0;
#X connect 6 2 11 0;
#X connect 7 0 2 0;
#X connect 7 1 15 0;
#X connect 7 2 8 0;
#X connect 8 0 9 0;
#X connect 8 1 9 1;
#X connect 9 0 10 1;
#X connect 10 0 16 0;
#X connect 11 0 12 1;
#X connect 12 0 1 0;
#X connect 13 0 1 0;
#X connect 14 0 19 0;
#X connect 14 1 7 0;
#X connect 15 0 4 1;
#X connect 16 0 12 2;
#X connect 17 0 10 0;
#X connect 18 0 14 0;
#X connect 19 0 20 0;
#X connect 20 0 1 0;
#X restore 25 218 pd trigger;
#N canvas 4 52 1189 769 detune 0;
#X obj 248 256 max 1;
#X obj 248 284 until;
#X obj 248 325 f;
#X obj 287 326 + 1;
#X obj 303 274 0;
#X obj 248 351 t a a b;
#X obj 248 571 pack 0 s 0;
#X obj 248 23 inlet;
#X obj 294 384 symbol speed;
#X obj 248 197 t a b, f 13;
#X obj 315 427 * 0.01;
#X obj 248 605 outlet;
#X obj 315 491 + 1, f 10;
#X obj 248 147 f;
#X obj 366 51 t b a;
#X obj 478 81 t b a;
#X obj 400 13 r \$0-speed;
#X obj 478 57 r \$0-detune;
#X obj 470 300 r \$0-direction;
#X obj 315 524 * 1;
#X obj 470 324 t b a;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 2 0 5 0;
#X connect 3 0 2 1;
#X connect 4 0 2 1;
#X connect 5 0 6 0;
#X connect 5 1 10 0;
#X connect 5 2 8 0;
#X connect 6 0 11 0;
#X connect 7 0 13 0;
#X connect 8 0 6 1;
#X connect 9 0 0 0;
#X connect 9 1 4 0;
#X connect 10 0 12 0;
#X connect 12 0 19 0;
#X connect 13 0 9 0;
#X connect 14 0 13 0;
#X connect 14 1 12 1;
#X connect 15 0 13 0;
#X connect 15 1 10 1;
#X connect 16 0 14 0;
#X connect 17 0 15 0;
#X connect 18 0 20 0;
#X connect 19 0 6 2;
#X connect 20 0 13 0;
#X connect 20 1 19 1;
#X restore 420 234 pd detune;
#N canvas 9 50 445 368 sample-switch 0;
#X obj 55 8 inlet;
#X obj 126 311 outlet;
#X obj 127 218 list prepend all table;
#X obj 127 242 list trim;
#X obj 90 104 sel 0 1;
#X obj 90 174 symbol \$0-main1;
#X obj 150 144 symbol \$0-main2;
#X obj 90 80 v \$0-sample-switch;
#X connect 0 0 7 0;
#X connect 2 0 3 0;
#X connect 3 0 1 0;
#X connect 4 0 5 0;
#X connect 4 1 6 0;
#X connect 5 0 2 0;
#X connect 6 0 2 0;
#X connect 7 0 4 0;
#X restore 117 223 pd sample-switch;
#X obj 25 381 t a a, f 32;
#X obj 25 505 spigot;
#X obj 246 506 spigot;
#X obj 361 429 sel 0 1;
#X msg 526 498 all note 0 0;
#X obj 603 288 + 1;
#X obj 603 312 == 1;
#X obj 570 287 f 1;
#X obj 315 394 t a a a;
#X obj 25 149 t b b b b b, f 57;
#X msg 319 509 all note 0 0;
#X msg 554 564 all vol \$1;
#X obj 554 525 r \$0-vol;
#X obj 87 39 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 107 107 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 64 478 == 1;
#X obj 285 480 == 0;
#X obj 25 600 clone -x cg-freeze-voice~ 6 \$0-main1 \$0-main-sample-length
;
#X obj 526 612 clone -x cg-freeze-voice~ 6 \$0-main1 \$0-main-sample-length
;
#X obj 421 201 6;
#X connect 1 0 7 0;
#X connect 2 0 16 0;
#X connect 2 0 21 0;
#X connect 4 0 7 0;
#X connect 5 0 7 0;
#X connect 6 0 7 0;
#X connect 7 0 8 0;
#X connect 7 1 9 0;
#X connect 8 0 24 0;
#X connect 9 0 25 0;
#X connect 10 0 17 0;
#X connect 10 1 11 0;
#X connect 11 0 25 0;
#X connect 12 0 13 0;
#X connect 13 0 14 1;
#X connect 14 0 12 0;
#X connect 14 0 15 0;
#X connect 15 0 22 0;
#X connect 15 1 23 0;
#X connect 15 2 10 0;
#X connect 16 0 4 0;
#X connect 16 1 6 0;
#X connect 16 2 1 0;
#X connect 16 3 26 0;
#X connect 16 4 14 0;
#X connect 17 0 24 0;
#X connect 18 0 24 0;
#X connect 18 0 25 0;
#X connect 19 0 18 0;
#X connect 20 0 16 0;
#X connect 22 0 8 1;
#X connect 23 0 9 1;
#X connect 24 0 0 0;
#X connect 25 0 0 0;
#X connect 26 0 5 0;
#X restore 69 188 pd grain-bank;
#X obj 69 146 t b b, f 15;
#X obj 194 237 outlet;
#X text 254 240 bang report new freeze;
#X text 362 50 Arg2: freeze size in samples;
#X connect 0 0 4 0;
#X connect 1 0 3 0;
#X connect 4 0 8 0;
#X connect 7 0 5 0;
#X connect 8 0 7 0;
#X connect 8 1 9 0;
