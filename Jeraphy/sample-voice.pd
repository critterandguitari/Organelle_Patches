#N canvas 314 101 1331 850 10;
#N canvas 0 50 450 278 (subpatch) 0;
#X array \$1-array 88200 float 2;
#X coords 0 1 88200 -1 335 251 1 0 0;
#X restore 605 -365 graph;
#X obj 969 -169 soundfiler;
#X obj 969 -81 / 44.1;
#X text 1025 -81 sample rate / 1000;
#X obj 1001 -39 s \$1-duration;
#X obj 969 -367 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 969 -341 symbol \$1-array;
#X obj 969 -255 list prepend -resize;
#X obj 969 -227 list prepend read;
#X obj 969 -199 list trim;
#X obj 969 -394 loadbang;
#X text 555 -402 construct the read message using the sound file name
(\$1);
#X obj 969 -319 list;
#X obj 969 -288 list prepend \$1;
#X obj 62 20 phasor~;
#X obj 62 358 hip~ 5;
#X obj 62 198 tabread4~ \$1-array;
#X obj 62 389 throw~ samp_voice_out;
#X obj 62 169 *~ 140688;
#X obj 62 -40 f;
#X obj 62 323 *~;
#X obj 62 280 *~;
#X obj 203 198 tabread4~ crown;
#X obj 62 -257 tgl 30 0 empty empty empty 17 7 0 10 -257985 -1 -1 0
1;
#X obj 120 -332 r kill;
#X msg 120 -310 0;
#X msg 216 -107 0;
#X obj 202 169 *~ 22016;
#X obj 416 -95 sel 0, f 17;
#X obj 62 -219 t f f, f 6;
#X obj 62 -132 t b b b, f 52;
#X msg 250 -32 0;
#X text 370 66 re-trigger for decay;
#X text 88 282 clickless window;
#X text 97 326 envelope;
#X text 112 357 DC offset;
#X text 63 220 read from array;
#X text 48 50 drive the loop;
#N canvas 668 104 1137 776 decay 0;
#X obj 82 486 outlet~;
#X obj 19 2 inlet;
#X obj 82 453 *~;
#X obj 81 422 vline~;
#X obj 81 329 f 1000;
#X obj 136 236 r \$1-duration;
#X obj 121 293 *;
#X obj 81 357 pack 0 0;
#X obj 121 122 t f f;
#X text 191 143 if knob all the way up \, never decay;
#X text 193 94 do a simple amplitude decay;
#X obj 190 171 expr if($f1 > 0.98 \, 1 \, 0);
#X msg 39 354 0 2;
#X obj 19 234 t b b;
#X obj 121 90 r decay;
#X msg 81 386 1 1 \, \$2 \$1 1;
#X text 35 26 trigger;
#X obj 119 2 inlet;
#X text 162 7 Kill;
#X obj 136 258 * 4;
#X connect 1 0 13 0;
#X connect 2 0 0 0;
#X connect 3 0 2 0;
#X connect 3 0 2 1;
#X connect 4 0 7 0;
#X connect 5 0 19 0;
#X connect 6 0 4 1;
#X connect 7 0 15 0;
#X connect 8 0 6 0;
#X connect 8 1 11 0;
#X connect 11 0 7 1;
#X connect 12 0 3 0;
#X connect 13 0 4 0;
#X connect 13 1 12 0;
#X connect 14 0 8 0;
#X connect 15 0 3 0;
#X connect 17 0 12 0;
#X connect 19 0 6 1;
#X restore 371 150 pd decay;
#N canvas 581 242 1138 740 HZ-control 0;
#X obj 361 -82 r bar-length;
#X obj 83 246 f;
#X obj 360 303 f;
#X obj 83 288 spigot;
#X obj 360 345 spigot;
#X obj 142 158 r sync;
#X obj 142 180 sel 0 1;
#X obj 113 215 t b b b;
#X msg 159 242 0;
#X msg 126 244 1;
#X obj 386 274 t b b b;
#X msg 432 301 0;
#X msg 399 303 1;
#X obj 361 193 expr 1 / ($f1/1000);
#X obj 195 -60 r playback;
#X obj 83 483 outlet;
#X obj 361 106 *;
#X obj 482 -81 r \$1-duration;
#X obj 482 10 int;
#X obj 83 -60 r \$1-duration;
#X obj 83 -33 expr 1000 / $f1;
#X obj 83 53 *, f 6;
#X obj 195 -12 t b f;
#X floatatom 83 75 5 0 0 0 - - -, f 5;
#X text 127 69 scale speed to global speed when not in sync mode;
#X text 501 193 stretch sample to fit to bar length set by BPM when
in sync mode;
#X text 705 -71 arg3(from sample voice argument3): length to round
sample;
#X obj 482 -50 expr if($f1 < \$3 \, \$3 \, $f1);
#X obj 482 -25 / \$3;
#X connect 0 0 16 0;
#X connect 1 0 3 0;
#X connect 2 0 4 0;
#X connect 3 0 15 0;
#X connect 4 0 15 0;
#X connect 5 0 6 0;
#X connect 6 0 7 0;
#X connect 6 1 10 0;
#X connect 7 0 1 0;
#X connect 7 1 9 0;
#X connect 7 2 8 0;
#X connect 8 0 4 1;
#X connect 9 0 3 1;
#X connect 10 0 2 0;
#X connect 10 1 12 0;
#X connect 10 2 11 0;
#X connect 11 0 3 1;
#X connect 12 0 4 1;
#X connect 13 0 2 0;
#X connect 14 0 22 0;
#X connect 16 0 13 0;
#X connect 17 0 27 0;
#X connect 18 0 16 1;
#X connect 19 0 20 0;
#X connect 20 0 21 0;
#X connect 21 0 23 0;
#X connect 22 0 21 0;
#X connect 22 1 21 1;
#X connect 23 0 1 0;
#X connect 27 0 28 0;
#X connect 28 0 18 0;
#X restore 104 -96 pd HZ-control;
#X text 247 -108 phase to begining;
#X text 275 -32 turn off when sample off;
#X obj 62 -403 r notes;
#X obj 62 -379 stripnote;
#X obj 62 -289 sel \$2;
#X obj 62 -315 % 24;
#X obj 62 -336 abs;
#X obj 62 -357 expr if ($f1 > 59 \, $f1 - 60 \, $f1 - 12);
#N canvas 527 118 343 468 play-modes 0;
#X obj 224 178 r re-sync;
#X obj 58 64 inlet;
#X obj 160 372 outlet;
#X obj 150 10 r sync;
#X obj 25 205 r beatDiv;
#X obj 25 258 spigot;
#X obj 58 236 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 25 354 spigot;
#X obj 25 283 t b b, f 23;
#X msg 25 376 0;
#X obj 110 173 r re-trigger;
#X obj 64 311 ==;
#X obj 110 195 t f f;
#X obj 110 227 sel 0;
#X msg 110 249 1;
#X text 207 373 BANGS;
#X obj 150 39 sel 1 0;
#X obj 202 143 spigot;
#X msg 265 110 1;
#X msg 235 110 0;
#X obj 166 107 sel 1;
#X obj 58 137 spigot;
#X msg 120 113 1;
#X msg 91 113 0;
#X connect 0 0 14 0;
#X connect 1 0 20 0;
#X connect 1 0 21 0;
#X connect 3 0 16 0;
#X connect 4 0 5 0;
#X connect 5 0 8 0;
#X connect 6 0 5 1;
#X connect 7 0 9 0;
#X connect 8 0 7 0;
#X connect 8 1 2 0;
#X connect 9 0 6 0;
#X connect 10 0 12 0;
#X connect 11 0 7 1;
#X connect 12 0 11 0;
#X connect 12 0 13 0;
#X connect 12 1 6 0;
#X connect 13 0 14 0;
#X connect 14 0 6 0;
#X connect 16 0 14 0;
#X connect 16 0 19 0;
#X connect 16 0 22 0;
#X connect 16 1 18 0;
#X connect 16 1 23 0;
#X connect 17 0 2 0;
#X connect 18 0 17 1;
#X connect 19 0 17 1;
#X connect 20 0 17 0;
#X connect 21 0 6 0;
#X connect 22 0 21 1;
#X connect 23 0 21 1;
#X restore 62 -180 pd play-modes;
#X obj 62 -18 spigot;
#X obj 201 -277 i;
#X obj 201 -256 sel 1;
#X obj 201 -231 s i-am-playing;
#X obj 201 -304 r are-you-playing;
#X text 677 86 Argument 1: which file to read;
#X text 677 116 Argument 2: which note number to trigger(moudulated
by 24 e.g. 0-24);
#X text 676 155 Argument 3: reads voice-banks argument 1 for setting
length to round to.;
#X text 166 -178 sync or no sync play modes;
#X text 246 -274 screenline 5 display of active voices;
#X text 136 -380 all midi notes trigger loops 0-24;
#X obj 1001 -109 s \$1-duration-samp;
#X obj 113 136 r \$1-duration-samp;
#X text 1009 -131 duration of sample in samples;
#X text 1110 -36 duration of sample in ms;
#X obj 387 99 threshold~ 0.0001 0 0.9999 0;
#X connect 1 0 60 0;
#X connect 1 0 2 0;
#X connect 2 0 4 0;
#X connect 5 0 6 0;
#X connect 6 0 12 0;
#X connect 7 0 8 0;
#X connect 8 0 9 0;
#X connect 9 0 1 0;
#X connect 10 0 5 0;
#X connect 12 0 13 0;
#X connect 13 0 7 0;
#X connect 14 0 18 0;
#X connect 14 0 27 0;
#X connect 14 0 64 0;
#X connect 15 0 17 0;
#X connect 16 0 21 0;
#X connect 18 0 16 0;
#X connect 19 0 49 0;
#X connect 20 0 15 0;
#X connect 21 0 20 0;
#X connect 22 0 21 1;
#X connect 23 0 29 0;
#X connect 23 0 50 0;
#X connect 24 0 25 0;
#X connect 25 0 23 0;
#X connect 26 0 14 1;
#X connect 27 0 22 0;
#X connect 28 0 31 0;
#X connect 28 0 38 1;
#X connect 29 0 48 0;
#X connect 29 1 28 0;
#X connect 29 1 49 1;
#X connect 30 0 19 0;
#X connect 30 1 26 0;
#X connect 30 2 38 0;
#X connect 31 0 14 0;
#X connect 38 0 20 1;
#X connect 39 0 19 0;
#X connect 42 0 43 0;
#X connect 43 0 47 0;
#X connect 44 0 23 0;
#X connect 45 0 44 0;
#X connect 46 0 45 0;
#X connect 47 0 46 0;
#X connect 48 0 30 0;
#X connect 49 0 14 0;
#X connect 50 0 51 0;
#X connect 51 0 52 0;
#X connect 53 0 50 0;
#X connect 61 0 18 1;
#X connect 64 0 38 0;
